function hideGoogleReader(){var x=document.getElementsByTagName("body")[0];document.createElement("div");for(var r=x.firstChild;r;){if(r.style){r.style.position="absolute";r.style.left="-10000px"}r=r.nextSibling}x.style.visibility="visible"}hideGoogleReader();
(function(){uki_reader={};var x=this,r=document,G=navigator.userAgent,L="uki"+ +new Date,v=Math.max,E=Math.min,S=Math.floor,N=Math.ceil;x.uki=x.uki||function(b,a){if(typeof b=="string"){var c=b.match(/^#((?:[\w\u00c0-\uFFFF_-]|\\.)+)$/),d=c&&uki._ids[c[1]];if(c&&!a)return new uki.Collection(d?[d]:[]);return uki.find(b,a)}if(b.length===undefined)b=[b];if(b.length>0&&uki.isFunction(b[0].typeName))return new uki.Collection(b);return uki.build(b)};uki.version="0.1.3";uki.guid=1;uki.F=function(){return false};
uki._ids={};uki.registerId=function(b){uki._ids[uki.attr(b,"id")]=b};uki.unregisterId=function(b){uki._ids[uki.attr(b,"id")]=undefined};var T=Object.prototype.toString,U=String.prototype.trim,O=Array.prototype.slice,X=/^\s+|\s+$/g,P={attr:function(b,a,c){if(c!==undefined){if(b[a]&&b[a].apply)b[a](c);else b[a]=c;return b}else return b[a]&&b[a].apply?b[a]():b[a]},proxy:function(b,a){var c=O.call(arguments,2),d=function(){return b.apply(a,c.concat(O.call(arguments,0)))};d.huid=b.huid=b.huid||uki.guid++;
return d},isFunction:function(b){return T.call(b)==="[object Function]"},isArray:function(b){return T.call(b)==="[object Array]"},trim:function(b){b=b||"";return U?U.call(b):b.replace(X,"")},escapeHTML:function(b){var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return(b+"").replace(/[&<>\"\']/g,function(c){return a[c]})},each:function(b,a,c){var d,f=0,e=b.length;if(e===undefined)for(d in b){if(!(!d||b[d]===undefined||!b.hasOwnProperty(d)))if(a.call(c||b[d],d,b[d])===false)break}else for(d=
b[0];f<e&&a.call(c||d,f,d)!==false;d=b[++f]);return b},inArray:function(b,a){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},unique:function(b){if(b.length&&(typeof b[0]=="object"||typeof b[0]=="function")){var a=[],c;for(c=0;c<b.length;c++){b[c].__uki_marked||(a[a.length]=b[c]);b[c].__uki_marked=true}for(c=0;c<a.length;c++)delete a[c].__uki_marked;return a}else{a=[];var d={};c=0;for(var f=b.length;c<f;c++){var e=b[c];if(!d[e]){d[e]=true;a.push(b[c])}}return a}},grep:function(b,a){for(var c=
[],d=0,f=b.length;d<f;d++)a(b[d],d)&&c.push(b[d]);return c},map:function(b,a,c){for(var d=[],f=uki.isFunction(a)?a:function(m){return uki.attr(m,a)},e=0,g=b.length;e<g;e++){var k=f.call(c||b[e],b[e],e);if(k!=null)d[d.length]=k}return d},reduce:function(b,a,c,d){for(var f=0,e=a.length;f<e;f++)b=c.call(d||a[f],b,a[f],f);return b},extend:function(){for(var b=arguments[0]||{},a=1,c=arguments.length,d;a<c;a++)if((d=arguments[a])!=null)for(var f in d){var e=d[f];if(e!==undefined)b[f]=e}return b},newClass:function(){var b=
function(){this.init.apply(this,arguments)},a,c;c=0;var d;a=[];if(arguments.length>1)if(arguments[0].prototype){a=function(){};a.prototype=arguments[0].prototype;b.prototype=new a;c=1;a=[a.prototype]}for(c=c;c<arguments.length;c++){d=arguments[c];if(this.isFunction(d))d=d.apply(d,a);a.push(d);uki.extend(b.prototype,arguments[c])}if(!b.prototype.init)b.prototype.init=function(){};return b},binarySearch:function(b,a){for(var c=0,d=a.length,f;c<d;){f=c+d>>1;a[f]<b?(c=f+1):(d=f)}return c},newProp:function(b,
a){return function(c){if(c===undefined)return this[b];if(a)a.call(this,c);else this[b]=c;return this}},addProps:function(b,a){uki.each(a,function(){b[this]=uki.newProp("_"+this)})},toArray:function(b){return O.call(b,0)},delegateProp:function(b,a,c){var d="_"+a;b[a]=function(f){if(f===undefined){if(this[c])return uki.attr(this[c],a,f);return this[d]}if(this[c])uki.attr(this[c],a,f);else this[d]=f;return this}}};P.extend(uki,P);delete P;uki.geometry={};var A=uki.geometry.Point=function(b,a){this.x=
b*1||0;this.y=a*1||0};A.prototype={toString:function(){return this.x+" "+this.y},clone:function(){return new A(this.x,this.y)},eq:function(b){return this.x==b.x&&this.y==b.y},offset:function(b,a){if(typeof b=="object"){a=b.y;b=b.x}this.x+=b;this.y+=a;return this},constructor:A};A.fromString=function(b){b=b.split(/\s+/);return new A(b[0],b[1])};var w=uki.geometry.Size=function(b,a){this.width=b*1||0;this.height=a*1||0};w.prototype={toString:function(){return this.width+" "+this.height},clone:function(){return new w(this.width,
this.height)},eq:function(b){return this.width==b.width&&this.height==b.height},empty:function(){return this.width<=0||this.height<=0},constructor:w};w.fromString=function(b){b=b.split(/\s+/);return new w(b[0],b[1])};w.create=function(b,a){if(b===undefined)return null;if(b.width!==undefined)return b;if(/\S+\s+\S+/.test(b+""))return w.fromString(b,a);return new w(b,a)};var s=uki.geometry.Rect=function(b,a,c,d){if(c!==undefined){this.x=b*1||0;this.y=a*1||0;this.width=c*1||0;this.height=d*1||0}else if(b===
undefined||b.x===undefined){this.y=this.x=0;this.width=b*1||0;this.height=a*1||0}else{this.x=b?b.x*1:0;this.y=b?b.y*1:0;this.width=a?a.width*1:0;this.height=a?a.height*1:0}};s.prototype={toString:function(){return[this.x,this.y,this.width,this.height].join(" ")},toCoordsString:function(){return[this.x,this.y,this.maxX(),this.maxY()].join(" ")},clone:function(){return new s(this.x,this.y,this.width,this.height)},minX:function(){return this.x},maxX:function(){return this.x+this.width},midX:function(){return this.x+
this.width/2},minY:function(){return this.y},midY:function(){return this.y+this.height/2},maxY:function(){return this.y+this.height},normalize:function(){this.x=this.y=0;return this},empty:w.prototype.empty,eq:function(b){return b&&this.x==b.x&&this.y==b.y&&this.height==b.height&&this.width==b.width},inset:function(b,a){this.x+=b;this.y+=a;this.width-=b*2;this.height-=a*2;return this},offset:A.prototype.offset,intersection:function(b){var a=new A(v(this.x,b.x),v(this.y,b.y));b=new w(E(this.maxX(),
b.maxX())-a.x,E(this.maxY(),b.maxY())-a.y);return b.empty()?new s:new s(a,b)},union:function(b){return s.fromCoords(E(this.x,b.x),E(this.y,b.y),v(this.maxX(),b.maxX()),v(this.maxY(),b.maxY()))},containsPoint:function(b){return b.x>=this.minX()&&b.x<=this.maxX()&&b.y>=this.minY()&&b.y<=this.maxY()},containsRect:function(b){return this.eq(this.union(b))},constructor:s};s.prototype.left=s.prototype.minX;s.prototype.top=s.prototype.minY;s.fromCoords=function(b,a,c,d){if(c===undefined)return new s(b.x,
b.y,a.x-b.x,a.y-b.y);return new s(b,a,c-b,d-a)};s.fromCoordsString=function(b){b=b.split(/\s+/);return s.fromCoords(b[0],b[1],b[2],b[3])};s.fromString=function(b){b=b.split(/\s+/);if(b.length>2)return new s(b[0],b[1],b[2],b[3]);return new s(b[0],b[1])};s.create=function(b,a,c,d){if(b===undefined)return null;if(b.x!==undefined)return b;if(/\S+\s+\S+/.test(b+""))return s.fromString(b,a);if(c===undefined)return new s(b,a);return new s(b,a,c,d)};var z=uki.geometry.Inset=function(b,a,c,d){this.top=b*1||
0;this.right=a*1||0;this.bottom=c===undefined?this.top*1:c*1;this.left=d===undefined?this.right*1:d*1};z.prototype={toString:function(){return[this.top,this.right,this.bottom,this.left].join(" ")},clone:function(){return new z(this.top,this.right,this.bottom,this.left)},width:function(){return this.left+this.right},height:function(){return this.top+this.bottom},negative:function(){return this.top<0||this.left<0||this.right<0||this.bottom<0},empty:function(){return!this.top&&!this.left&&!this.right&&
!this.bottom}};z.fromString=function(b){b=b.split(/\s+/);if(b.length<3)b[2]=b[0];if(b.length<4)b[3]=b[1];return new z(b[0],b[1],b[2],b[3])};z.create=function(b,a,c,d){if(b===undefined)return null;if(b.top!==undefined)return b;if(/\S+\s+\S+/.test(b+""))return z.fromString(b,a);if(c===undefined)return new z(b,a);return new z(b,a,c,d)};uki.dom={createElement:function(b,a,c){b=r.createElement(b);if(a)b.style.cssText=a;if(c)b.innerHTML=c;b[L]=uki.guid++;return b},probe:function(b,a){var c=r.body;c.appendChild(b);
a=a(b);c.removeChild(b);return a},layout:function(b,a,c){c=c||{};if(c.left!=a.left)b.left=a.left+"px";if(c.top!=a.top)b.top=a.top+"px";if(c.right!=a.right)b.right=a.right+"px";if(c.bottom!=a.bottom)b.bottom=a.bottom+"px";if(c.width!=a.width)b.width=v(a.width,0)+"px";if(c.height!=a.height)b.height=v(a.height,0)+"px";return a},computedStyle:function(b){if(r&&r.defaultView&&r.defaultView.getComputedStyle)return r.defaultView.getComputedStyle(b,null);else if(b.currentStyle)return b.currentStyle},contains:function(b,
a){try{if(b.contains)return b.contains(a);if(b.compareDocumentPosition)return!!(b.compareDocumentPosition(a)&16)}catch(c){}for(;a&&a!=b;)try{a=a.parentNode}catch(d){a=null}return b==a},createStylesheet:function(b){var a=r.createElement("style");r.getElementsByTagName("head")[0].appendChild(a);if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(document.createTextNode(b));return a}};uki.each(["createElement"],function(b,a){uki[a]=uki.dom[a]});uki.dom.special={};uki.dom.Event=function(b){b=b||
{};this.domEvent=b.domEvent||b;for(var a=uki.dom.props.length,c;a;){c=uki.dom.props[--a];this[c]=b[c]}};uki.dom.Event.prototype=new (function(){function b(){return true}this.preventDefault=function(){var a=this.domEvent;a.preventDefault&&a.preventDefault();a.returnValue=false;this.isDefaultPrevented=b};this.stopPropagation=function(){var a=this.domEvent;a.stopPropagation&&a.stopPropagation();a.cancelBubble=true;this.isPropagationStopped=b};this.isDefaultPrevented=this.isPropagationStopped=uki.F});
uki.extend(uki.dom,{bound:{},handlers:{},props:"type altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which dragOffset dataTransfer".split(" "),events:"blur focus load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error draggesturestart draggestureend draggesture dragstart dragend drag drop dragenter dragleave dragover".split(" "),
bind:function(b,a,c){if(b.setInterval&&b!=window)b=window;c.huid=c.huid||uki.guid++;var d=b[L]=b[L]||uki.guid++,f=uki.dom.handlers[d]=uki.dom.handlers[d]||function(){uki.dom.handler.apply(arguments.callee.elem,arguments)},e,g;f.elem=b;uki.dom.bound[d]||(uki.dom.bound[d]={});a=a.split(" ");for(e=0;e<a.length;e++){g=a[e];if(!uki.dom.bound[d][g]){uki.dom.bound[d][g]=[];if(!uki.dom.special[g]||uki.dom.special[g].setup.call(b)===false)b.addEventListener?b.addEventListener(g,f,false):b.attachEvent("on"+
g,f)}uki.dom.bound[d][g].push(c)}c=f=b=null},unbind:function(b,a,c){var d=b[L],f=c&&c.huid,e,g;if(a)a=a.split(" ");else{a=[];uki.each(uki.dom.bound[d]||[],function(m){a.push(m)})}for(e=0;e<a.length;e++){g=a[e];if(!(!d||!uki.dom.bound[d]||!uki.dom.bound[d][g])){uki.dom.bound[d][g]=c?uki.grep(uki.dom.bound[d][g],function(m){return m.huid!==f}):[];if(uki.dom.bound[d][g].length==0){var k=uki.dom.handlers[d];if(!uki.dom.special[g]||uki.dom.special[g].teardown.call(b)===false)b.removeEventListener?b.removeEventListener(g,
k,false):b.detachEvent("on"+g,k);uki.dom.bound[d][g]=null}}}},handler:function(b){b=b||x.event;var a=b.type,c=this[L],d=uki.dom.bound[c];if(!b.domEvent){b=new uki.dom.Event(b);b=uki.dom.fix(b)}if(!(!c||!d||!d[a])){c=0;for(d=d[a];c<d.length;c++)d[c].call(this,b)}},fix:function(b){if(!b.target)b.target=b.srcElement||r;if(b.target.nodeType==3)b.target=b.target.parentNode;if(!b.relatedTarget&&b.fromElement)b.relatedTarget=b.fromElement==b.target?b.toElement:b.fromElement;if(b.pageX==null&&b.clientX!=
null){var a=r.documentElement,c=r.body;b.pageX=b.clientX+(a&&a.scrollLeft||c&&c.scrollLeft||0)-(a.clientLeft||0);b.pageY=b.clientY+(a&&a.scrollTop||c&&c.scrollTop||0)-(a.clientTop||0)}if(!b.which&&(b.charCode||b.charCode===0?b.charCode:b.keyCode))b.which=b.charCode||b.keyCode;if(!b.metaKey&&b.ctrlKey)try{b.metaKey=b.ctrlKey}catch(d){}if(!b.which&&b.button)b.which=b.button&1?1:b.button&2?3:b.button&4?2:0;return b},preventDefaultHandler:function(b){b&&b.preventDefault();return false}});uki.each({mouseover:"mouseenter",
mouseout:"mouseleave"},function(b,a){var c=function(d){if(!uki.dom.contains(this,d.relatedTarget)){d.type=a;uki.dom.handler.apply(this,arguments)}};uki.dom.special[a]={setup:function(){uki.dom.bind(this,b,c)},teardown:function(){uki.dom.unbind(this,b,c)}}});x.attachEvent&&x.attachEvent("onunload",function(){uki.each(uki.dom.bound,function(b,a){uki.each(a,function(c){try{uki.dom.handlers[b].elem.detachEvent("on"+c,uki.dom.handlers[b])}catch(d){}})})});(function(){function b(o){if(!e.draggable){e.draggable=
o;uki.dom.bind(r,"mousemove scroll",d);uki.dom.bind(r,m,f);uki.dom.bind(r,"selectstart mousedown",uki.dom.preventDefaultHandler)}}function a(){e.draggable=null;uki.dom.unbind(r,"mousemove scroll",d);uki.dom.unbind(r,m,f);uki.dom.unbind(r,"selectstart mousedown",uki.dom.preventDefaultHandler)}function c(o){o=new uki.dom.Event(o);o.type="draggesturestart";uki.dom.handler.apply(this,arguments);if(!o.isDefaultPrevented()){b(this);e.position=new A(-o.pageX,-o.pageY)}}function d(o){o=new uki.dom.Event(o);
o.type="draggesture";o.dragOffset=(new A(o.pageX,o.pageY)).offset(e.position);uki.dom.handler.apply(e.draggable,arguments);o.isDefaultPrevented()&&a(e.draggable)}function f(o){o=new uki.dom.Event(o);o.type="draggestureend";o.dragOffset=(new A(o.pageX,o.pageY)).offset(e.position);uki.dom.handler.apply(e.draggable,arguments);a(e.draggable)}var e=uki.dom.dnd={draggable:null,nativeDnD:false,position:null};try{if(typeof r.createEvent("MouseEvent").dataTransfer=="object"||r.createEvent("DragEvent").initDragEvent)e.nativeDnD=
true}catch(g){}var k={setup:function(){if(this.__draggesturebound)this.__draggesturebound++;else{this.__draggesturebound=1;uki.dom.bind(this,"mousedown",c);if(!e.nativeDnD&&typeof this.ondragstart=="object")this.ondragstart=function(){event.returnValue=false}}},teardown:function(){this.__draggesturebound--;this.__draggesturebound||uki.dom.unbind(this,"mousedown",c)}};uki.extend(uki.dom.special,{draggesturestart:k,draggestureend:k,draggesture:k});var m="mouseup "+(e.nativeDnD?" dragend":"")})();(function(){function b(j){if(uki.isFunction(j.dom)){if(j.parent().length)return j.dom();
var h=uki.createElement("div","width:1px;height:1px;position:absolute;left:-999em;top:0");r.body.appendChild(h);j.attachTo(h);return h}return j}function a(j){j=new uki.dom.Event(j);var h=j.dataTransfer;j.dataTransfer=new uki.dom.DataTransferWrapper(h);uki.dom.handler.apply(this,arguments);h.effectAllowed=j.dataTransfer.effectAllowed;h.dropEffect=j.dataTransfer.dropEffect}function c(j){uki.dom.bind(j,"draggestureend",k)}function d(j){if(m.dataTransfer){m.dataTransfer.cleanup();m.dragOver=m.dataTransfer=
m.target=null;uki.dom.unbind(j,"draggestureend",k)}}function f(j){if(!(!m.dataTransfer||j.domEvent.__dragEntered||!o)){j=new uki.dom.Event(j);j.domEvent.__dragEntered=true;if(m.dragOver!=this){m.dragOver=this;j.type="dragenter";uki.dom.handler.apply(this,arguments)}}}function e(j){if(o){if(!j.domEvent.__dragEntered&&m.dragOver){j=new uki.dom.Event(j);j.type="dragleave";uki.dom.handler.apply(m.dragOver,arguments);m.dragOver=null}}else{if(m.dataTransfer){j.type="drag";j.target=m.target}else if(j.dragOffset.x>
m.dragDelta||j.dragOffset.y>m.dragDelta){var h=j.target,q=this.parentNode;try{for(;h&&h!=q&&!h.getAttribute("draggable");)h=h.parentNode}catch(u){h=null}if(h&&h.getAttribute("draggable")){m.target=j.target=h;j.type="dragstart";m.dataTransfer=j.dataTransfer=new uki.dom.DataTransfer(j.domEvent.dataTransfer);c(this)}else return}else return;j=new uki.dom.Event(j);uki.dom.handler.apply(this,arguments);j.isDefaultPrevented()?d(this):g(j)}}function g(j){var h=m.dataTransfer._dragImage.style,q=j.domEvent.type;
j.stopPropagation();j.preventDefault();h.left="-999em";h=r.elementFromPoint(j.pageX,j.pageY);m.dataTransfer.update(j);try{var u;o=true;try{if(r.createEventObject){u=r.createEventObject();for(var C=p.length,y;C;){y=uki.dom.props[--C];u[y]=j.domEvent[y]}h.fireEvent("on"+q,u)}else{u=r.createEvent("MouseEvents");u.initMouseEvent(q,true,true,r.defaultView,j.detail,j.screenX,j.screenY,j.clientX,j.clientY,j.ctrlKey,j.altKey,j.shiftKey,j.metaKey,j.button,null);h.dispatchEvent(u)}}catch(D){}o=false}catch(B){}}
function k(j){if(!o)if(m.dataTransfer){j.type="dragend";j.target=m.target;j.dataTransfer=m.dataTransfer;uki.dom.handler.apply(this,arguments);g(j);d(this)}}var m=uki.dom.dnd,o=false;uki.extend(m,{dragDelta:5,initNativeDnD:function(){var j=uki.createElement("div","position: absolute;left:-999em;");r.body.appendChild(j);m.dragImageContainer=j;m.initNativeDnD=uki.F;return true},dragImageContainer:null,dataTransfer:null,target:null,dragOver:null});var n=["dropEffect","effectAllowed","types","files"];
uki.dom.DataTransferWrapper=uki.newClass(new (function(){this.init=function(j){this.dataTransfer=j;for(var h=n.length-1;h>=0;h--)this[n[h]]=j[n[h]]};this.setData=function(j,h){return this.dataTransfer.setData(j,h)};this.clearData=function(j){return this.dataTransfer.clearData(j)};this.getData=function(j){return this.dataTransfer.getData(j)};this.setDragImage=function(j,h,q){m.initNativeDnD();j=b(j);var u=j.cloneNode(true);j=u.style;j.left=j.right=j.top=j.bottom="";j.position="static";m.dragImageContainer.appendChild(u);
setTimeout(function(){m.dragImageContainer.removeChild(u)},1);return this.dataTransfer.setDragImage(u,h,q)}}));uki.dom.DataTransfer=uki.newClass(new (function(){this.init=function(){uki.extend(this,{dropEffect:"none",effectAllowed:"none",types:[],files:[],dragImage:new Image,imagePosition:new A,data:{}})};this.setData=function(j,h){this.data[j]=h;uki.inArray(j,this.types)==-1&&this.types.push(j)};this.clearData=function(j){if(j){delete this.data[j];this.types=uki.grep(this.types,function(h){return h!=
j})}else{this.data={};this.types=[]}};this.getData=function(j){return this.data[j]};this.setDragImage=function(j,h,q){this._dragImage=this._initDragImage(j);this._imagePosition=new A(h||0,q||0)};this.update=function(j){if(this._dragImage){this._dragImage.style.left=j.pageX-this._imagePosition.x+"px";this._dragImage.style.top=j.pageY-this._imagePosition.y+"px"}};this.cleanup=function(){this._dragImage&&this._dragImage.parentNode.removeChild(this._dragImage);this._dragImage=undefined};this._initDragImage=
function(j){j=b(j);j=j.cloneNode(true);var h=j.style;h.left=h.right=h.top=h.bottom="";h.position="absolute";h.left="-999em";h.zIndex="9999";r.body.appendChild(j);return j}}));var l={setup:function(){if(this.__w3cdragbound)this.__w3cdragbound++;else{this.__w3cdragbound=1;uki.dom.bind(this,"draggesture",e)}},teardown:function(){this.__w3cdragbound--;this.__draggesturebound||uki.dom.unbind(this,"draggesture",e)}};if(m.nativeDnD)uki.extend(uki.dom.special,{dragstart:{setup:function(){this.addEventListener("dragstart",
a,false)},teardown:function(){this.removeEventListener("dragstart",a,false)}}});else{uki.extend(uki.dom.special,{dragstart:l,drag:l,dragend:l});uki.each({dragover:"mousemove",drop:"mouseup"},function(j,h){var q=function(u){if(m.dataTransfer&&o){u=new uki.dom.Event(u);u.type=j;u.dataTransfer=m.dataTransfer;if(j=="dragover")m.__canDrop=false;else{d(this);if(!m.__canDrop)return}uki.dom.handler.apply(this,arguments);if(u.isDefaultPrevented())m.__canDrop=true}};uki.dom.special[j]={setup:function(){uki.dom.bind(this,
h,q)},teardown:function(){uki.dom.unbind(this,h,q)}}});uki.dom.special.dragenter={setup:function(){uki.dom.bind(this,"mousemove",f)},teardown:function(){uki.dom.unbind(this,"mousemove",f)}};uki.dom.special.dragleave={setup:function(){},teardown:function(){}}}var p="detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button".split(" ")})();(function(){var b;b=r.documentElement.getBoundingClientRect?(uki.dom.offset=function(a){if(!a||a==x)return new A;if(a===a.ownerDocument.body)return b.bodyOffset(a);
b.boxModel===undefined&&b.initializeBoxModel();var c=a.getBoundingClientRect(),d=a.ownerDocument;a=d.body;d=d.documentElement;return new A(c.left+(b.pageXOffset||b.boxModel&&d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0),c.top+(b.pageYOffset||b.boxModel&&d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0))}):(uki.dom.offset=function(a){if(!a||a==x)return new A;if(a===a.ownerDocument.body)return b.bodyOffset(a);b.initialized||b.initialize();var c=a.offsetParent,d=a.ownerDocument,f,
e=d.documentElement,g=d.body;d=d.defaultView;f=d.getComputedStyle(a,null);for(var k=a.offsetTop,m=a.offsetLeft;(a=a.parentNode)&&a!==g&&a!==e;){f=d.getComputedStyle(a,null);k-=a.scrollTop;m-=a.scrollLeft;if(a===c){k+=a.offsetTop;m+=a.offsetLeft;if(b.doesNotAddBorder&&!(b.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(a.tagName))){k+=parseInt(f.borderTopWidth,10)||0;m+=parseInt(f.borderLeftWidth,10)||0}c=a.offsetParent}if(b.subtractsBorderForOverflowNotVisible&&f.overflow!=="visible"){k+=parseInt(f.borderTopWidth,
10)||0;m+=parseInt(f.borderLeftWidth,10)||0}f=f}if(f.position==="relative"||f.position==="static"){k+=g.offsetTop;m+=g.offsetLeft}if(f.position==="fixed"){k+=v(e.scrollTop,g.scrollTop);m+=v(e.scrollLeft,g.scrollLeft)}return new A(m,k)});uki.extend(b,{initialize:function(){if(!this.initialized){var a=r.body,c=r.createElement("div"),d,f,e,g=a.style.marginTop;d={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(f in d)c.style[f]=d[f];c.innerHTML='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';
a.insertBefore(c,a.firstChild);d=c.firstChild;f=d.firstChild;e=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=f.offsetTop!==5;this.doesAddBorderForTableAndCells=e.offsetTop===5;d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;a.style.marginTop="1px";this.doesNotIncludeMarginInBodyOffset=a.offsetTop===0;a.style.marginTop=g;a.removeChild(c);this.boxModel===undefined&&this.initializeBoxModel();this.initialized=true}},initializeBoxModel:function(){if(this.boxModel===
undefined){var a=r.createElement("div");a.style.width=a.style.paddingLeft="1px";r.body.appendChild(a);this.boxModel=a.offsetWidth===2;r.body.removeChild(a).style.display="none"}},bodyOffset:function(a){b.initialized||b.initialize();var c=a.offsetTop,d=a.offsetLeft;if(uki.dom.doesNotIncludeMarginInBodyOffset){c+=parseInt(uki.dom.elem.currentStyle(a).marginTop,10)||0;d+=parseInt(uki.dom.elem.currentStyle(a).marginLeft,10)||0}return new A(d,c)}})})();uki.initNativeLayout=function(){uki.supportNativeLayout===
undefined&&uki.dom.probe(uki.createElement("div","position:absolute;width:100px;height:100px;left:-999em;",'<div style="position:absolute;left:0;right:0"></div>'),function(b){uki.supportNativeLayout=b.childNodes[0].offsetWidth==100&&!x.opera})};uki.view={declare:function(){var b=uki.toArray(arguments),a=b.shift();b=uki.newClass.apply(uki,b);var c=a.split("."),d=x,f,e;b.prototype.typeName=function(){return a};for(f=0;f<c.length-1;f++){e=c[f];d[e]||(d[e]={});d=d[e]}return d[c[c.length-1]]=b}};uki.view.Observable=
{bind:function(b,a){a.huid=a.huid||uki.guid++;uki.each(b.split(" "),function(c,d){this._bound(d)||this._bindToDom(d);this._observersFor(d).push(a)},this);return this},unbind:function(b,a){uki.each(b.split(" "),function(c,d){this._observers[d]=!a?[]:uki.grep(this._observersFor(d,true),function(f){return f!=a&&f.huid!=a.huid});this._observers[d].length==0&&this._unbindFromDom(d)},this);return this},trigger:function(b){var a=Array.prototype.slice.call(arguments,1);uki.each(this._observersFor(b,true),
function(c,d){d.apply(this,a)},this);return this},_unbindFromDom:function(b){this._domHander&&this._eventTargets[b]&&uki.dom.unbind(this._eventTargets[b],b,this._domHander)},_bindToDom:function(b,a){if(a||this.dom){this._domHander=this._domHander||uki.proxy(function(c){c.source=this;this.trigger(c.type,c)},this);this._eventTargets=this._eventTargets||{};this._eventTargets[b]=a||this.dom();uki.dom.bind(this._eventTargets[b],b,this._domHander);return true}},_bound:function(b){return this._observers&&
this._observers[b]},_observersFor:function(b,a){if(a&&(!this._observers||!this._observers[b]))return[];if(!this._observers)this._observers={};this._observers[b]||(this._observers[b]=[]);return this._observers[b]}};(function(){function b(){return r.compatMode=="CSS1Compat"&&r.documentElement||r.body}var a=uki.Attachment=uki.newClass(uki.view.Observable,{init:function(c,d,f){uki.initNativeLayout();this._dom=c=c||x;this._view=d;this._rect=s.create(f)||this.rect();uki.dom.offset.initialize();d.parent(this);
this.domForChild().appendChild(d.dom());if(c!=x&&c.tagName!="BODY"){d=c.runtimeStyle||c.ownerDocument.defaultView.getComputedStyle(c,null);if(!d.position||d.position=="static")c.style.position="relative"}a.register(this);this.layout()},domForChild:function(){return this._dom===x?r.body:this._dom},rectForChild:function(){return this.rect()},scroll:function(){},scrollTop:function(){return this._dom.scrollTop||0},scrollLeft:function(){return this._dom.scrollLeft||0},parent:function(){return null},layout:function(){var c=
this._rect,d=this._rect=this.rect();this._view.parentResized(c,d);this._view._needsLayout&&this._view.layout();this.trigger("layout",{source:this,rect:d})},dom:function(){return this._dom},view:function(){return this._view},rect:function(){var c=this._dom===x||this._dom===r.body?v(b().clientWidth,this._dom.offsetWidth||0):this._dom.offsetWidth,d=this._dom===x||this._dom===r.body?v(b().clientHeight,this._dom.offsetHeight||0):this._dom.offsetHeight;return new s(c,d)}});a.instances=[];a.register=function(c){if(a.instances.length==
0){var d=false;uki.dom.bind(x,"resize",function(){if(!d){d=true;setTimeout(function(){d=false;uki.each(a.instances,function(){this.layout()})},1)}})}a.instances.push(c)};a.childViews=function(){return uki.map(a.instances,"view")};uki.top=function(){return[a]}})();uki.Collection=function(b){this.length=0;Array.prototype.push.apply(this,b)};uki.fn=uki.Collection.prototype=new (function(){var b=this;this.each=function(a){uki.each(this,a);return this};this.grep=function(a){return new uki.Collection(uki.grep(this,
a))};this.attr=function(a,c){if(c!==undefined){for(var d=0;d<this.length;d++)uki.attr(this[d],a,c);return this}else return this[0]?uki.attr(this[0],a):""};this.find=function(a){return uki.find(a,this)};this.attachTo=function(a,c){this.each(function(){new uki.Attachment(a,this,c)});return this};this.append=function(a){if(!this[0])return this;a=a.length!==undefined?a:[a];for(var c=0;c<a.length;c++)this[0].appendChild(a[c]);return this};this.appendTo=function(a){a=uki(a)[0];this.each(function(){a.appendChild(this)});
return this};uki.Collection.addAttrs=function(a){uki.each(a,function(c,d){b[d]=function(f){return this.attr(d,f)}})};uki.Collection.addAttrs("dom html text background value rect checked anchors childViews typeName id name visible disabled focusable style draggable textSelectable width height minX maxX minY maxY left top x y".split(" "));uki.each([["parent","parent"],["next","nextView"],["prev","prevView"]],function(a,c){b[c[0]]=function(){return new uki.Collection(uki.unique(uki.map(this,c[1])))}});
uki.each("bind unbind trigger layout appendChild removeChild insertBefore addRow removeRow resizeToContents toggle".split(" "),function(a,c){b[c]=function(){for(var d=0;d<this.length;d++)this[d][c].apply(this[d],arguments);return this}});uki.each(uki.dom.events,function(a,c){b[c]=function(d){if(d)this.bind(c,d);else for(d=0;d<this.length;d++)this[d][c]?this[d][c]():this[d].trigger(c);return this}})});(function(){function b(d){return uki.map(d,function(f){return a(f)})}function a(d){if(uki.isFunction(d.typeName))return d;
var f=d.view||d.type;if(uki.isFunction(f))f=f();else if(typeof f==="string"){var e=f.split("."),g=x;if(!x[e[0]]||e[0]=="Image")e=["uki","view"].concat(e);for(var k=0;k<e.length;k++)g=g[e[k]];if(!g)throw"No view of type "+f+" found";f=new g(d.rect)}else f=f;c(f,d);return f}function c(d,f){uki.each(f,function(e,g){e=="view"||e=="type"||e=="rect"||uki.attr(d,e,g)});return d}uki.build=function(d){if(d.length===undefined)d=[d];return new uki.Collection(b(d))};uki.build.copyAttrs=c})();(function(){function b(n){return a(uki.map(n,
function(l){return[l].concat(b(f(l,"childViews")))}))}function a(n){return uki.reduce([],n,c)}function c(n,l){return n.concat(l)}var d,f=uki.attr,e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,g=[{name:"ID",regexp:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/},{name:"ATTR",regexp:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/},{name:"TYPE",regexp:/^((?:[\w\u00c0-\uFFFF\*_\.-]|\\.)+)/},{name:"POS",regexp:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/}],
k={first:function(n){return n===0},last:function(n,l,p){return n===p.length-1},even:function(n){return n%2===0},odd:function(n){return n%2===1},lt:function(n,l){return n<l[2]-0},gt:function(n,l){return n>l[2]-0},nth:function(n,l){return l[2]-0==n},eq:function(n,l){return l[2]-0==n}},m={TYPE:function(n,l){l=l[1];if(l=="*")return true;return(n=f(n,"typeName"))&&n.length>=l.length&&("."+n).indexOf("."+l)==n.length-l.length},ATTR:function(n,l){n=f(n,l[1]);var p=n+"",j=l[2];l=l[4];return n==null?j==="!=":
j==="="?p===l:j==="*="?p.indexOf(l)>=0:j==="~="?(" "+p+" ").indexOf(l)>=0:!l?p&&n!==false:j==="!="?p!=l:j==="^="?p.indexOf(l)===0:j==="$="?p.substr(p.length-l.length)===l:false},ID:function(n,l){return m.ATTR(n,["","id","=","",l[1]])},POS:function(n,l,p,j){return(n=k[l[1]])?n(p,l,j):false}},o={"+":function(n){return uki.unique(uki.map(n,"nextView"))},">":function(n){return uki.unique(a(uki.map(n,"childViews")))},"":function(n){return uki.unique(b(a(uki.map(n,"childViews"))))},"~":function(){}};d=
uki.Selector={find:function(n,l,p){l=l||uki.top();if(l.length===undefined)l=[l];var j=d.tokenize(n);n=j[0];j=j[1];for(var h=l,q;n.length>0;){q=o[n[0]]?o[n.shift()]:o[""];h=q(h);if(n.length==0)break;h=d.reduce(n.shift(),h)}if(j)h=h.concat(d.find(j,l,true));return p?h:new uki.Collection(uki.unique(h))},reduce:function(n,l){if(!l||!l.length)return[];for(var p,j;n!="";){j=false;uki.each(g,function(h,q){if(p=n.match(q.regexp)){j=true;l=uki.grep(l,function(u,C){return m[q.name](u,p,C,l)});n=n.replace(q.regexp,
"");return false}});if(!j)break}return l},tokenize:function(n){var l=[],p,j;for(e.lastIndex=0;(p=e.exec(n))!==null;){l.push(p[1]);if(p[2]){j=RegExp.rightContext;break}}return[l,j]}};uki.find=d.find})();uki.image=function(b,a,c){var d=new Image;d.src=uki.imageSrc(b,a,c);return d};uki.imageSrc=function(b,a,c){if(uki.image.dataUrlSupported&&a)return a;if(c&&uki.image.needAlphaFix)return c;return b};uki.imageHTML=function(b,a,c,d){if(uki.image.needAlphaFix&&c)b=c;else if(uki.image.dataUrlSupported)b=
a;return"<img"+(d||"")+' src="'+b+'" />'};uki.image.load=function(b,a){var c=b.length;uki.each(b,function(d,f){if(!f||f.width)--c||a();else{d=function(){f.onload=f.onerror=f.onabort=null;--c||a()};f.onload=d;f.onerror=d;f.onabort=d}})};uki.image.dataUrlSupported=r.createElement("canvas").toDataURL||/MSIE (8)/.test(G);uki.image.needAlphaFix=/MSIE 6/.test(G);uki.image.needAlphaFix&&r.execCommand("BackgroundImageCache",false,true);(function(){var b=/^\s*null\s*$/,a=/theme\s*\(\s*([^)]*\s*)\)/,c=/rows\s*\(\s*([^)]*\s*)\)/,
d=/cssBox\s*\(\s*([^)]*\s*)\)/,f=uki.background=function(e){if(typeof e==="string"){var g;if(e.match(b))return new f.Null;if(g=e.match(a))return uki.theme.background(g[1]);if(g=e.match(c))return new f.Rows(g[1].split(",")[0],g[1].split(/\s*,\s*/).slice(1));if(g=e.match(d))return new f.CssBox(g[1]);return new f.Css(e)}return e}})();uki.background.Base=uki.background.Null=uki.newClass({init:uki.F,attachTo:uki.F,detach:uki.F});uki.background.Sliced9=uki.newClass(new (function(){function b(e,g,k,m,o){m=
k[3]?c(k,m):"";k[3]||(g+=a(k,o));return'<div class="'+e+'" style="position:absolute;overflow:hidden;'+g+'">'+m+"</div>"}function a(e,g){return";background: url("+uki.imageSrc(e[0],e[1],e[2])+") "+g}function c(e,g){return uki.imageHTML(e[0],e[1],e[2],' ondragstart="return false;" galleryimg="no" style="-webkit-user-drag:none;-webkit-user-select:none;-moz-user-select:none;position:absolute;'+g+'"')}var d=uki.dom,f={};this.init=function(e,g,k){this._settings=uki.extend({},e);this._inset=z.create(g);
this._size=null;this._inited=false;k=k||{};this._fixedSize=w.create(k.fixedSize)||new w;this._bgInset=z.create(k.inset)||new z;this._zIndex=k.zIndex||-1;this._container=this._getContainer();this._container.style.zIndex=this._zIndex};this._getContainer=function(){var e=this._getKey();if(!f[e])return f[e]=this._createContainer();return f[e].cloneNode(true)};this._createContainer=function(){var e=this._inset,g=this._bgInset,k=this._settings,m=e.left+e.right,o=e.top+e.bottom;g=["left:"+g.left+"px","right:"+
g.right+"px","top:"+g.top+"px","bottom:"+g.bottom+"px"].join(";");var n=[];if(e.top&&e.left)n[n.length]=b("tl",["left:0;top:0","width:"+e.left+"px","height:"+e.top+"px"].join(";"),k.c,["left:0;top:0","width:"+m+"px","height:"+o+"px"].join(";"),"top left");if(e.top)n[n.length]=b("t",["left:"+e.left+"px","top:0","height:"+e.top+"px","right:"+e.right+"px"].join(";"),k.h,["left:0;top:0;width:100%","height:"+o+"px"].join(";"),"repeat-x top");if(e.top&&e.right)n[n.length]=b("tr",["right:0;top:0","width:"+
e.right+"px","height:"+e.top+"px"].join(";"),k.c,["left:-"+e.left+"px","top:0","width:"+m+"px","height:"+o+"px"].join(";"),"top right");if(e.left)n[n.length]=b("l",["left:0","top:"+e.top+"px","width:"+e.left+"px","bottom:"+e.bottom+"px"].join(";"),k.v,["left:0;top:0;height:100%","width:"+m+"px"].join(";"),"repeat-y left");if(k.m)n[n.length]=b("m",["left:"+e.left+"px","top:"+e.top+"px","right:"+e.right+"px","bottom:"+e.bottom+"px"].join(";"),k.m,"left:0;top:0;height:100%;width:100%","");if(e.right)n[n.length]=
b("r",["right:0","top:"+e.top+"px","width:"+e.right+"px","bottom:"+e.bottom+"px"].join(";"),k.v,["left:-"+e.left+"px","top:0;height:100%","width:"+m+"px"].join(";"),"repeat-y right");if(e.bottom&&e.left)n[n.length]=b("bl",["left:0;bottom:0","width:"+e.left+"px","height:"+e.bottom+"px"].join(";"),k.c,["left:0","top:-"+e.top+"px","width:"+m+"px","height:"+o+"px"].join(";"),"left -"+e.top+"px");if(e.bottom)n[n.length]=b("b",["left:"+e.left+"px","bottom:0","height:"+e.bottom+"px","right:"+e.right+"px"].join(";"),
k.h,["left:0","top:-"+e.top+"px","width:100%","height:"+o+"px"].join(";"),"repeat-x 0 -"+e.top+"px");if(e.bottom&&e.right)n[n.length]=b("br",["right:0;bottom:0","width:"+e.right+"px","height:"+e.bottom+"px"].join(";"),k.c,["left:-"+e.left+"px","top:-"+e.top+"px","width:"+m+"px","height:"+o+"px"].join(";"),"right -"+e.top+"px");return uki.createElement("div","position:absolute;overflow:hidden;"+g,n.join(""))};this._getKey=function(){return uki.map(["v","h","m","c"],function(e){return this._settings[e]&&
this._settings[e][0]||""},this).concat([this._inset,this._bgInset,this._fixedSize]).join(",")};this.attachTo=function(e){this._comp=e;this._container.style.visibility="visible";this._comp.dom().appendChild(this._container);if(!uki.supportNativeLayout){this._layoutHandler=this._layoutHandler||uki.proxy(function(g){if(!(this._size&&this._size.eq(g.rect))){this._size=g.rect;this.layout()}},this);this._comp.bind("layout",this._layoutHandler);this.layout()}};this.detach=function(){if(this._comp){this._container.style.visibility=
"hidden";uki.supportNativeLayout||this._comp.unbind("layout",this._layoutHandler);this._size=this._comp=null;this._attached=this._inited=false}};this.layout=function(){var e=this._comp.rect(),g=this._parts,k=this._inset,m=this._bgInset,o=this._fixedSize,n=S(o.width||e.width-m.left-m.right);e=S(o.height||e.height-m.top-m.bottom);m=k.left+k.right;k=k.top+k.bottom;if(!g){g={};uki.each(this._container.childNodes,function(){if(this.className)g[this.className]=this});this._parts=g}g.t&&d.layout(g.t.style,
{width:n-m});g.b&&d.layout(g.b.style,{width:n-m});g.l&&d.layout(g.l.style,{height:e-k});g.r&&d.layout(g.r.style,{height:e-k});g.m&&d.layout(g.m.style,{height:e-k,width:n-m});d.layout(this._container.style,{width:n,height:e})}}));uki.background.Css=uki.newClass(new (function(){this.init=function(b){this._options=typeof b=="string"?{background:b}:b};this.attachTo=function(b){this._comp=b;this._originalValues={};uki.each(this._options,function(a,c){this._originalValues[a]=b.style(a);b.style(a,c)},this)};
this.detach=function(){this._comp&&uki.each(this._options,function(b){this._comp.style(b,this._originalValues[b])},this)}}));uki.background.CssBox=uki.newClass(new (function(){function b(c){a[c]||uki.dom.probe(uki.createElement("div",c+";position:absolute;overflow:hidden;left:-999em;width:10px;height:10px;"),function(d){a[c]=new z(d.offsetHeight-10,d.offsetWidth-10)});return a[c]}var a={};this.init=function(c,d){this._options=c;d=d||{};this._inset=inset=z.create(d.inset)||new z;this._insetWidth=b(c).left+
inset.left+inset.right;this._insetHeight=b(c).top+inset.top+inset.bottom;this._container=uki.createElement("div",c+";position:absolute;overflow:hidden;z-index:"+(d.zIndex||"-1")+";left:"+inset.left+";top:"+inset.top+"px;right:"+inset.right+"px;bottom:"+inset.bottom+"px",d.innerHTML);this._attached=false};this.attachTo=function(c){this._comp=c;this._comp.dom().appendChild(this._container);if(!uki.supportNativeLayout){this._layoutHandler=this._layoutHandler||uki.proxy(function(d){this.layout(d.rect)},
this);this._comp.bind("layout",this._layoutHandler);this.layout(this._comp.rect())}};this.layout=function(c){this._prevLayout=uki.dom.layout(this._container.style,{width:c.width-this._insetWidth,height:c.height-this._insetHeight},this._prevLayout)};this.detach=function(){if(this._comp){this._comp.dom().removeChild(this._container);uki.supportNativeLayout||this._comp.unbind("layout",this._layoutHandler);this._attached=false}}}));uki.background.Rows=uki.newClass(new (function(){function b(d,f){var e=
d+" "+f.join(" "),g=[],k=[],m,o=f.length;if(!a[e]){for(m=0;m<o;m++)g[m]=['<div style="height:',d,"px;width:100%;overflow:hidden;",f[m]?"background:"+f[m]:"",'"></div>'].join("");for(m=0;m<c;m++)k[m]=g[m%o];a[e]=k.join("")}return a[e]}var a=[],c=100;this.init=function(d,f){this._height=d||20;this._colors=uki.isArray(f)?f:f.split(" ");this._packSize=N(c/this._colors.length)*this._colors.length;this._renderedHeight=0;this._visibleExt=200;if(this._colors.length==1)this._colors=this._colors.concat(["#FFF"])};
this.attachTo=function(d){this._comp&&this.detach();this._comp=d;if(!this._container)this._container=uki.createElement("div","position:absolute;left:0;top:0;width:100%;z-index:-1");this._layoutHandler=this._layoutHandler||uki.proxy(function(f){this.layout(f.rect,f.visibleRect)},this);this._comp.dom().appendChild(this._container);this._comp.bind("layout",this._layoutHandler)};this.layout=function(d,f){for(d=f?f.height+this._visibleExt*2:d.maxY();this._renderedHeight<d;){var e=c*this._height,g=uki.createElement("div",
"height:"+e+"px;overflow:hidden;width:100%;",b(this._height,this._colors));this._renderedHeight+=e;this._container.appendChild(g)}if(f)this._container.style.top=N((f.y-this._visibleExt)/this._height/this._colors.length)*this._height*this._colors.length+"px"};this.detach=function(){if(this._comp){this._comp.dom().removeChild(this._container);this._comp.unbind("layout",this._layoutHandler);this._comp=null}}}));uki.background.Multi=uki.newClass({init:function(){this._bgs=Array.prototype.slice.call(arguments,
0)},attachTo:function(b){for(var a=0;a<this._bgs.length;a++)this._bgs[a].attachTo(b)},detach:function(){for(var b=0;b<this._bgs.length;b++)this._bgs[b].detach()}});uki.theme={themes:[],register:function(b){uki.theme.themes.push(b)},background:function(b,a){return uki.theme._namedResource(b,"background",a)||new uki.background.Null},image:function(b,a){return uki.theme._namedResource(b,"image",a)||new Image},imageSrc:function(b,a){return uki.theme._namedResource(b,"imageSrc",a)||""},style:function(b,
a){return uki.theme._namedResource(b,"style",a)||""},dom:function(b,a){return uki.theme._namedResource(b,"dom",a)||uki.createElement("div")},template:function(b,a){return uki.theme._namedResource(b,"template",a)||""},_namedResource:function(b,a,c){for(var d=uki.theme.themes.length-1;d>=0;d--){var f=uki.theme.themes[d][a](b,c);if(f)return f}return null}};uki.theme.Base={images:[],imageSrcs:[],backgrounds:[],doms:[],styles:[],templates:[],background:function(b,a){return this.backgrounds[b]&&this.backgrounds[b](a)},
image:function(b,a){if(this.images[b])return this.images[b](a);return this.imageSrcs[b]&&uki.image.apply(uki,this.imageSrcs[b](a))},imageSrc:function(b,a){if(this.imageSrcs[b])return uki.imageSrc.apply(uki,this.imageSrcs[b](a));return this.images[b]&&this.images[b](a).src},dom:function(b,a){return this.doms[b]&&this.doms[b](a)},style:function(b,a){return this.styles[b]&&this.styles[b](a)},template:function(b,a){return this.templates[b]&&this.templates[b](a)}};uki.theme.Template=function(b){b=b.split("${");
var a,c,d;this.parts=[b[0]];this.names=[];a=1;for(c=b.length;a<c;a++){d=b[a].split("}");this.names.push(d.shift());this.parts.push("");this.parts.push(d.join("}"))}};uki.theme.Template.prototype.render=function(b){for(var a=0,c=this.names,d=c.length;a<d;a++)this.parts[a*2+1]=b[c[a]]||"";return this.parts.join("")};uki.view.utils=new (function(){function b(a){return a.visibleRect?a.visibleRect():a.rect().clone()}this.visibleRect=function(a,c){var d=[],f,e=a;do{d[d.length]=e;e=e.parent()}while(e&&e!=
c);if(c&&c!=a)d[d.length]=c;for(a=d.length-1;a>=0;a--){e=d[a];c=b(e);f=f?f.intersection(c):c;f.x-=e.rect().x;f.y-=e.rect().y}return f};this.top=function(a){for(;a.parent();)a=a.parent();return a};this.offset=function(a,c){for(var d=new A,f;a&&a!=c;){f=a.rect();d.x+=f.x;d.y+=f.y;if(a.scrollTop){d.x-=a.scrollLeft();d.y-=a.scrollTop()}a=a.parent()}return d};this.scrollableParent=function(a){do{if(uki.isFunction(a.scrollTop))return a;a=a.parent()}while(a);return null}});uki.extend(uki.view,uki.view.utils);
uki.view.Styleable=new (function(){this.style=function(a,c){if(typeof a=="string")return this._style(a,c);uki.each(a,function(d,f){this._style(d,f)},this);return this};this._style=function(a,c){if(c===undefined)return this._dom.style[a];this._dom.style[a]=c;return this};var b=uki.createElement("div").style;uki.each(["userSelect","MozUserSelect","WebkitUserSelect"],function(a,c){if(typeof b[c]=="string")this._textSelectProp=c},this);this.textSelectable=function(a){if(a===undefined)return this._textSelectable;
this._textSelectable=a;if(this._textSelectProp)this._dom.style[this._textSelectProp]=a?"":this._textSelectProp=="MozUserSelect"?"-moz-none":"none";else uki.dom[a?"unbind":"bind"](this.dom(),"selectstart",uki.dom.preventDefaultHandler);this._dom.style.cursor=a?"":"default";return this};this.draggable=function(a){if(a===undefined)return this._dom.getAttribute("draggable");this._dom.setAttribute("draggable",true);this._dom.style.WebkitUserDrag="element";return this}});uki.view.Focusable=new (function(){this._focusOnClick=
this._focusable=true;this.focusOnClick=uki.newProp("_focusOnClick");this.focusable=uki.newProp("_focusable",function(b){(this._focusable=b)&&this._initFocusable();this._updateFocusable()});this.disabled=uki.newProp("_disabled",function(b){var a=b!==!!this._disabled;(this._disabled=b)&&this.blur();this._updateFocusable();a&&this._updateBg&&this._updateBg()});this._updateFocusable=function(){if(!(this._preCreatedFocusTarget||!this._focusTarget))this._focusTarget.style.display=this._focusable&&!this._disabled?
"block":"none"};this._initFocusable=function(b){if(!(!b&&!this._focusable||this._focusTarget)){this._preCreatedFocusTarget=this._focusTarget=b;if(!b){this._focusTarget=uki.createElement("input","position:absolute;left:-9999px;top:0;width:1px;height:1px;");this.dom().appendChild(this._focusTarget)}this._hasFocus=false;this._firstFocus=true;uki.dom.bind(this._focusTarget,"focus",uki.proxy(function(a){this._hasFocus||this._focus(a)},this));uki.dom.bind(this._focusTarget,"blur",uki.proxy(function(){if(this._hasFocus){this._hasFocus=
false;setTimeout(uki.proxy(function(){this._hasFocus||this._blur()},this),1)}},this));b||this.bind("mousedown",function(){this._focusOnClick&&this.focus()});this._updateFocusable()}};this._focus=function(){this._hasFocus=true;this._firstFocus=false};this._blur=function(){this._hasFocus=false};this.focus=function(){if(this._focusable&&!this._disabled){this._hasFocus||this._focus();var b=this._focusTarget;setTimeout(function(){try{b.focus()}catch(a){}b=null},1)}return this};this.blur=function(){try{this._focusTarget.blur()}catch(b){}return this};
this.hasFocus=function(){return this._hasFocus};this._bindToDom=function(b){if(!this._focusTarget||"keyup keydown keypress focus blur".indexOf(b)==-1)return false;return uki.view.Observable._bindToDom.call(this,b,this._focusTarget)}});var H=16,I=32;uki.view.declare("uki.view.Base",uki.view.Observable,uki.view.Styleable,function(){function b(c){if(!c)return 0;var d=0;if(c.indexOf("width")>-1)d|=H;if(c.indexOf("height")>-1)d|=I;return d}var a=1;this.defaultCss="position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;";
this.init=function(c){this._parentRect=this._rect=s.create(c);this._setup();uki.initNativeLayout();this._createDom()};this._setup=function(){uki.extend(this,{_anchors:0,_parent:null,_visible:true,_needsLayout:true,_textSelectable:false,_styleH:"left",_styleV:"top",_firstLayout:true})};this.dom=function(){return this._dom};this.id=function(c){if(c===undefined)return this._dom.id;this._dom.id&&uki.unregisterId(this);this._dom.id=c;uki.registerId(this);return this};uki.delegateProp(this,"className",
"_dom");this.visible=function(c){if(c===undefined)return this._dom.style.display!="none";this._dom.style.display=c?"block":"none";return this};this.background=function(c){if(c===undefined&&!this._background&&this.defaultBackground)this._background=this.defaultBackground();if(c===undefined)return this._background;c=uki.background(c);if(c==this._background)return this;this._background&&this._background.detach(this);c.attachTo(this);this._background=c;return this};this.defaultBackground=function(){return this._defaultBackground&&
uki.background(this._defaultBackground)};this.parent=function(c){if(c===undefined)return this._parent;this._parent=c;return this};this.childViews=function(){return[]};this.prevView=function(){if(!this.parent())return null;return this.parent().childViews()[this._viewIndex-1]||null};this.nextView=function(){if(!this.parent())return null;return this.parent().childViews()[this._viewIndex+1]||null};this.rect=function(c){if(c===undefined)return this._rect;this._parentRect=c=s.create(c);this._rect=this._normalizeRect(c);
this._needsLayout=this._needsLayout||a++;return this};this.anchors=uki.newProp("_anchors",function(c){if(c.indexOf){var d=0;if(c.indexOf("right")>-1)d|=2;if(c.indexOf("bottom")>-1)d|=4;if(c.indexOf("top")>-1)d|=1;if(c.indexOf("left")>-1)d|=8;if(c.indexOf("width")>-1||d&8&&d&2)d|=H;if(c.indexOf("height")>-1||d&4&&d&1)d|=I;c=d}this._anchors=c;this._styleH=c&8?"left":"right";this._styleV=c&1?"top":"bottom"});this.rectForChild=function(){return this.rect()};this.layout=function(){this._layoutDom(this._rect);
this._needsLayout=false;this.trigger("layout",{rect:this._rect,source:this});this._firstLayout=false};uki.each(["min","max"],function(c,d){c=d+"Size";var f="_"+c;this[c]=function(e){if(e===undefined)return this[f]||new w;this[f]=w.create(e);this.rect(this._parentRect);this._dom.style[d+"Width"]=this[f].width?this[f].width+"px":"";this._dom.style[d+"Height"]=this[f].height?this[f].height+"px":"";return this}},this);this.parentResized=function(c,d){var f=this._parentRect.clone(),e=(d.width-c.width)/
((this._anchors&8^8?1:0)+(this._anchors&H?1:0)+(this._anchors&2^2?1:0));c=(d.height-c.height)/((this._anchors&1^1?1:0)+(this._anchors&I?1:0)+(this._anchors&4^4?1:0));if(this._anchors&8^8)f.x+=e;if(this._anchors&H)f.width+=e;if(this._anchors&1^1)f.y+=c;if(this._anchors&I)f.height+=c;this.rect(f)};this.resizeToContents=function(c){c=b(c);if(0==c)return this;this.rect();this._rect=this._parentRect=this._calcRectOnContentResize(c);this._needsLayout=true;return this};this.contentsSize=function(){return this.rect()};
this._normalizeRect=function(c){if(this._minSize)c=new s(c.x,c.y,v(this._minSize.width,c.width),v(this._minSize.height,c.height));if(this._maxSize)c=new s(c.x,c.y,E(this._maxSize.width,c.width),E(this._maxSize.height,c.height));return c};this._initBackgrounds=function(){this.background()&&this.background().attachTo(this)};this._calcRectOnContentResize=function(c){var d=this.contentsSize(c),f=this.rect();if(d.eq(f))return f;var e=this.rect().clone(),g=d.width-f.width;d=d.height-f.height;if(c&H){if(this._anchors&
8^8&&this._anchors&2^2)e.x-=g/2;else if(this._anchors&8^8)e.x-=g;e.width+=g}if(c&I){if(this._anchors&1^1&&this._anchors&4^4)e.y-=d/2;else if(this._anchors&1^1)e.y-=d;e.height+=d}return e};uki.each(["width","height","minX","maxX","minY","maxY","x","y","left","top"],function(c,d){this[d]=function(f){if(f===undefined)return uki.attr(this.rect(),d);uki.attr(this.rect(),d,f);return this}},this);this._createDom=function(){this._dom=uki.createElement("div",this.defaultCss)};this._layoutDom=function(c){var d=
{},f=uki.supportNativeLayout,e=this.parent().rectForChild(this);if(f&&this._anchors&8&&this._anchors&2){d.left=c.x;d.right=e.width-c.x-c.width}else{d.width=c.width;d[this._styleH]=this._styleH=="left"?c.x:e.width-c.x-c.width}if(f&&this._anchors&1&&this._anchors&4){d.top=c.y;d.bottom=e.height-c.y-c.height}else{d.height=c.height;d[this._styleV]=this._styleV=="top"?c.y:e.height-c.y-c.height}this._lastLayout=uki.dom.layout(this._dom.style,d,this._lastLayout);this._firstLayout&&this._initBackgrounds();
return true};this._bindToDom=function(c){if("resize layout".indexOf(c)>-1)return true;return uki.view.Observable._bindToDom.call(this,c)}});uki.view.declare("uki.view.Container",uki.view.Base,function(b){function a(c,d){var f=0,e;for(e=c._childViews.length-1;e>=0;e--)if(c._childViews[e].visible())f=v(f,c._childViews[e].rect()[d]());return f}this._setup=function(){this._childViews=[];b._setup.call(this)};this.contentsWidth=function(){return a(this,"maxX")};this.contentsHeight=function(){return a(this,
"maxY")};this.contentsSize=function(){return new w(this.contentsWidth(),this.contentsHeight())};this.childViews=function(c){if(c===undefined)return this._childViews;uki.each(this._childViews,function(d,f){this.removeChild(f)},this);uki.each(uki.build(c),function(d,f){this.appendChild(f)},this);return this};this.removeChild=function(c){c.parent(null);this.domForChild(c).removeChild(c.dom());var d,f;d=c._viewIndex+1;for(f=this._childViews.length;d<f;d++)this._childViews[d]._viewIndex--;this._childViews=
uki.grep(this._childViews,function(e){return e!=c})};this.appendChild=function(c){c._viewIndex=this._childViews.length;this._childViews.push(c);c.parent(this);this.domForChild(c).appendChild(c.dom())};this.insertBefore=function(c,d){var f,e;f=c._viewIndex=d._viewIndex;for(e=this._childViews.length;f<e;f++)this._childViews[f]._viewIndex++;this._childViews.splice(d._viewIndex-1,0,c);c.parent(this);this.domForChild(c).insertBefore(c.dom(),d.dom())};this.domForChild=function(){return this._dom};this._layoutDom=
function(c){b._layoutDom.call(this,c);this._layoutChildViews(c)};this._layoutChildViews=function(){for(var c=0,d=this.childViews();c<d.length;c++)d[c]._needsLayout&&d[c].visible()&&d[c].layout(this._rect)};this.rect=function(c){if(c===undefined)return this._rect;this._parentRect=c=s.create(c);var d=this._rect;if(!this._resizeSelf(c))return this;this._needsLayout=true;if(d.width!=c.width||d.height!=c.height)this._resizeChildViews(d);this.trigger("resize",{oldRect:d,newRect:this._rect,source:this});
return this};this._resizeSelf=function(c){this._rect=this._normalizeRect(c);return true};this._resizeChildViews=function(c){for(var d=0,f=this.childViews();d<f.length;d++)f[d].parentResized(c,this._rect)}});(function(){var b=+new Date,a=/=\?(&|$)/,c=/\?/,d=/(\?|&)_=.*?(&|$)/,f=/^(\w+:)?\/\/([^\/?#]+)/,e=/%20/g,g=/\S/,k=function(){};uki.extend(uki,{error:function(l){throw l;},parseJSON:function(l){if(typeof l!=="string"||!l)return null;l=uki.trim(l);if(/^[\],:{}\s]*$/.test(l.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return window.JSON&&window.JSON.parse?window.JSON.parse(l):(new Function("return "+l))();else uki.error("Invalid JSON: "+l)},globalEval:function(l){if(l&&g.test(l)){var p=document.getElementsByTagName("head")[0]||document.documentElement,j=document.createElement("script");j.type="text/javascript";if(uki.scriptEval)j.appendChild(document.createTextNode(l));else j.text=l;p.insertBefore(j,
p.firstChild);p.removeChild(j)}},scriptEval:false});var m=document.createElement("script"),o="script"+b;m.type="text/javascript";try{m.appendChild(document.createTextNode("window."+o+"=1;"))}catch(n){}document.documentElement.insertBefore(m,document.documentElement.firstChild);if(window[o]){uki.scriptEval=true;delete window[o]}uki.extend(uki,{get:function(l,p,j,h){if(uki.isFunction(p)){h=h||j;j=p;p=null}return uki.ajax({type:"GET",url:l,data:p,success:j,dataType:h})},getScript:function(l,p){return uki.get(l,
null,p,"script")},getJSON:function(l,p,j){return uki.get(l,p,j,"json")},post:function(l,p,j,h){if(uki.isFunction(p)){h=h||j;j=p;p={}}return uki.ajax({type:"POST",url:l,data:p,success:j,dataType:h})},ajaxSetup:function(l){uki.extend(uki.ajaxSettings,l)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:window.XMLHttpRequest&&(window.location.protocol!=="file:"||!window.ActiveXObject)?function(){return new window.XMLHttpRequest}:
function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(l){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(l){function p(){h.success&&h.success.call(y,C,u,t)}function j(){h.complete&&h.complete.call(y,t,u)}var h=uki.extend({},uki.ajaxSettings,l),q,u,C,y=l&&l.context||h,D=h.type.toUpperCase();if(h.data&&h.processData&&
typeof h.data!=="string")h.data=uki.param(h.data,h.traditional);if(h.dataType==="jsonp"){if(D==="GET")a.test(h.url)||(h.url+=(c.test(h.url)?"&":"?")+(h.jsonp||"callback")+"=?");else if(!h.data||!a.test(h.data))h.data=(h.data?h.data+"&":"")+(h.jsonp||"callback")+"=?";h.dataType="json"}if(h.dataType==="json"&&(h.data&&a.test(h.data)||a.test(h.url))){q=h.jsonpCallback||"jsonp"+b++;if(h.data)h.data=(h.data+"").replace(a,"="+q+"$1");h.url=h.url.replace(a,"="+q+"$1");h.dataType="script";window[q]=window[q]||
function(J){C=J;p();j();window[q]=undefined;try{delete window[q]}catch(Q){}K&&K.removeChild(F)}}if(h.dataType==="script"&&h.cache===null)h.cache=false;if(h.cache===false&&D==="GET"){var B=now(),V=h.url.replace(d,"$1_="+B+"$2");h.url=V+(V===h.url?(c.test(h.url)?"&":"?")+"_="+B:"")}if(h.data&&D==="GET")h.url+=(c.test(h.url)?"&":"?")+h.data;B=(B=f.exec(h.url))&&(B[1]&&B[1]!==location.protocol||B[2]!==location.host);if(h.dataType==="script"&&D==="GET"&&B){var K=document.getElementsByTagName("head")[0]||
document.documentElement,F=document.createElement("script");F.src=h.url;if(h.scriptCharset)F.charset=h.scriptCharset;if(!q){var W=false;F.onload=F.onreadystatechange=function(){if(!W&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){W=true;p();j();F.onload=F.onreadystatechange=null;K&&F.parentNode&&K.removeChild(F)}}}K.insertBefore(F,K.firstChild)}else{var M=false,t=h.xhr();if(t){h.username?t.open(D,h.url,h.async,h.username,h.password):t.open(D,h.url,h.async);try{if(h.data||
l&&l.contentType)t.setRequestHeader("Content-Type",h.contentType);if(h.ifModified){uki.lastModified[h.url]&&t.setRequestHeader("If-Modified-Since",uki.lastModified[h.url]);uki.etag[h.url]&&t.setRequestHeader("If-None-Match",uki.etag[h.url])}B||t.setRequestHeader("X-Requested-With","XMLHttpRequest");t.setRequestHeader("Accept",h.dataType&&h.accepts[h.dataType]?h.accepts[h.dataType]+", */*":h.accepts._default)}catch(aa){}if(h.beforeSend&&h.beforeSend.call(y,t,h)===false){t.abort();return false}var R=
t.onreadystatechange=function(J){if(!t||t.readyState===0||J==="abort"){M||j();M=true;if(t)t.onreadystatechange=k}else if(!M&&t&&(t.readyState===4||J==="timeout")){M=true;t.onreadystatechange=k;u=J==="timeout"?"timeout":!uki.httpSuccess(t)?"error":h.ifModified&&uki.httpNotModified(t,h.url)?"notmodified":"success";var Q;if(u==="success")try{C=uki.httpData(t,h.dataType,h)}catch(Y){u="parsererror";Q=Y}if(u==="success"||u==="notmodified")q||p();else uki.handleError(h,t,u,Q);j();J==="timeout"&&t.abort();
if(h.async)t=null}};try{var Z=t.abort;t.abort=function(){t&&Z.call(t);R("abort")}}catch(ba){}h.async&&h.timeout>0&&setTimeout(function(){t&&!M&&R("timeout")},h.timeout);try{t.send(D==="POST"||D==="PUT"||D==="DELETE"?h.data:null)}catch($){uki.handleError(h,t,null,$);j()}h.async||R();return t}}},handleError:function(l,p,j,h){if(l.error)l.error.call(l.context||l,p,j,h)},active:0,httpSuccess:function(l){try{return!l.status&&location.protocol==="file:"||l.status>=200&&l.status<300||l.status===304||l.status===
1223||l.status===0}catch(p){}return false},httpNotModified:function(l,p){var j=l.getResponseHeader("Last-Modified"),h=l.getResponseHeader("Etag");if(j)uki.lastModified[p]=j;if(h)uki.etag[p]=h;return l.status===304||l.status===0},httpData:function(l,p,j){var h=l.getResponseHeader("content-type")||"",q=p==="xml"||!p&&h.indexOf("xml")>=0;l=q?l.responseXML:l.responseText;q&&l.documentElement.nodeName==="parsererror"&&uki.error("parsererror");if(j&&j.dataFilter)l=j.dataFilter(l,p);if(typeof l==="string")if(p===
"json"||!p&&h.indexOf("json")>=0)l=uki.parseJSON(l);else if(p==="script"||!p&&h.indexOf("javascript")>=0)uki.globalEval(l);return l},param:function(l,p){function j(C,y){if(uki.isArray(y))uki.each(y,function(D,B){p||/\[\]$/.test(C)?h(C,B):j(C+"["+(typeof B==="object"||uki.isArray(B)?D:"")+"]",B)});else!p&&y!=null&&typeof y==="object"?uki.each(y,function(D,B){j(C+"["+D+"]",B)}):h(C,y)}function h(C,y){y=uki.isFunction(y)?y():y;q[q.length]=encodeURIComponent(C)+"="+encodeURIComponent(y)}var q=[];if(p===
undefined)p=uki.ajaxSettings.traditional;if(uki.isArray(l)||l.uki)uki.each(l,function(){h(this.name,this.value)});else for(var u in l)j(u,l[u]);return q.join("&").replace(e,"+")}})})();uki.data={};uki.data.Observable={bind:function(b,a){var c=this;a.huid=a.huid||uki.guid++;uki.each(b.split(" "),function(d,f){c._observersFor(f).push(a)})},unbind:function(b,a){var c=this;uki.each(b.split(" "),function(d,f){c._observers[f]=!a?[]:uki.grep(c._observersFor(f),function(e){return e!=a&&e.huid!=a.huid});c._observers[f]&&
delete c._observers[f]})},trigger:function(b){var a=Array.prototype.slice.call(arguments,1);uki.each(this._observersFor(b,true),function(c,d){d.apply(this,a)},this)},_observersFor:function(b,a){if(a&&(!this._observers||!this._observers[b]))return[];if(!this._observers)this._observers={};this._observers[b]||(this._observers[b]=[]);return this._observers[b]}};uki.data.Model=uki.newClass(uki.data.Observable,function(){this._fields=[];this.init=function(b){this.update(b||{})};this.fields=function(){return this._fields};
this.update=function(b){var a=[],c={};uki.each(b,function(d,f){var e=uki.isFunction(this[d])?"_"+d:d;if(this[e]!=f){c[d]=true;a.push(d);this[e]=f;this.trigger("change."+d,{model:this})}},this);a.length&&this.trigger("change",{changes:c,fields:a,model:this});return this}});uki.data.model={_newProp:function(b){return uki.newProp("_"+b,function(a){var c={};c[b]=a;this.update(c)})},addFields:function(b,a){for(var c=0;c<a.length;c++)b[a[c]]=uki.data.model._newProp(a[c]);b._fields=a.concat(b._fields||[])},
newLoader:function(b,a){return function(c){c=c||uki.F;if(this["loaded."+b])c.call(this,this[b]());else{this.bind("load."+b,c);if(!this["loading."+b]){this["loading."+b]=true;uki.ajax(uki.extend({url:uki.isFunction(a.url)?a.url.call(this):a.url,data:uki.isFunction(a.data)?a.data.call(this):a.data?a.data:{id:this.id()},success:uki.proxy(function(d){this["loading."+b]=false;this["loaded."+b]=true;a.setter?a.setter.call(this,d):(this["_"+b]=d);this.trigger("load."+b,d);this.unbind("load."+b)},this)},
a.ajaxOptions||{}))}}}}};uki.view.declare("uki.view.Box",uki.view.Container,{});uki.view.declare("uki.view.Image",uki.view.Base,function(){this.typeName=function(){return"uki.view.Image"};uki.delegateProp(this,"src","_dom");this._createDom=function(){this._dom=uki.createElement("img",this.defaultCss)}});uki.view.declare("uki.view.Label",uki.view.Base,function(b){this._setup=function(){b._setup.call(this);uki.extend(this,{_scrollable:false,_textSelectable:false,_inset:new z})};this._style=function(a,
c){if(c!==undefined&&"font fontFamily fontWeight fontSize textDecoration color".indexOf(a)!=-1)this._label.style[a]=c;return b._style.call(this,a,c)};this.textSelectable=function(a){if(a!==undefined&&!this._textSelectProp)this._label.unselectable=a?"":"on";return b.textSelectable.call(this,a)};this.contentsSize=function(a){var c=this._createLabelClone(a),d=this.inset(),f;uki.dom.probe(c,function(){f=new w(c.offsetWidth+d.width(),c.offsetHeight+d.height())});return f};this.text=function(a){return a===
undefined?this.html():this.html(uki.escapeHTML(a))};this.html=function(a){if(a===undefined)return this._label.innerHTML;this._label.innerHTML=a;return this};this.inset=uki.newProp("_inset",function(a){this._inset=z.create(a)});this.scrollable=uki.newProp("_scrollable",function(a){this._scrollable=a;this._label.style.overflow=a?"auto":"hidden"});this.multiline=uki.newProp("_multiline",function(a){this._multiline=a;this._label.style.whiteSpace=a?"":"nowrap"});this._createLabelClone=function(a){var c=
this._label.cloneNode(true),d=this.inset(),f=this.rect();if(a&H)c.style.width=c.style.right="";else if(uki.supportNativeLayout){c.style.right="";c.style.width=f.width-d.width()+"px"}if(a&I)c.style.height=c.style.bottom="";else if(uki.supportNativeLayout){c.style.bottom="";c.style.height=f.height-d.height()+"px"}c.style.paddingTop=0;c.style.visibility="hidden";return c};this._createDom=function(){b._createDom.call(this);this._label=uki.createElement("div",b.defaultCss+"font-size:12px;white-space:nowrap;");
this._dom.appendChild(this._label);this.textSelectable(this.textSelectable())};this._layoutDom=function(){b._layoutDom.apply(this,arguments);var a=this._inset;if(!this.multiline()){parseInt(this.style("fontSize"),10);this._label.style.lineHeight=this._rect.height-a.top-a.bottom+"px"}a=uki.supportNativeLayout?{left:a.left,top:a.top,right:a.right,bottom:a.bottom}:{left:a.left,top:a.top,width:this._rect.width-a.width(),height:this._rect.height-a.height()};this._lastLabelLayout=uki.dom.layout(this._label.style,
a,this._lastLabelLayout)}});uki.view.declare("uki.view.Button",uki.view.Label,uki.view.Focusable,function(b,a){this._backgroundPrefix="button-";this._setup=function(){b._setup.call(this);uki.extend(this,{_inset:new z(0,4),defaultCss:b.defaultCss+"cursor:default;-moz-user-select:none;-webkit-user-select:none;"})};uki.addProps(this,["backgroundPrefix"]);uki.each(["normal","hover","down","focus","disabled"],function(c,d){var f=d+"-background";this[f]=function(e){if(e)this["_"+f]=e;return this["_"+f]=
this["_"+f]||uki.theme.background(this._backgroundPrefix+d,{height:this.rect().height,view:this})}},this);this._createLabelClone=function(c){return b._createLabelClone.call(this,c)};this._layoutDom=function(c){b._layoutDom.call(this,c);if(this._firstLayout){this["hover-background"]();this["down-background"]();this._backgroundByName(this._backgroundName||"normal")}};this._updateBg=function(){this._backgroundByName(this._disabled?"disabled":this._down?"down":this._over?"hover":"normal")};this._createDom=
function(){this._dom=uki.createElement("div",this.defaultCss+"color:#333;text-align:center;");this._label=uki.createElement("div",b.defaultCss+"font-size:12px;line-height:12px;white-space:nowrap;");this._dom.appendChild(this._label);this.style("fontWeight","bold");this._dom.appendChild(uki.createElement("div","left:0;top:0;width:100%;height:100%;position:absolute;background:url("+uki.theme.imageSrc("x")+");"));this.textSelectable(this.textSelectable());this._initFocusable();uki.dom.bind(document,
"mouseup",uki.proxy(this._mouseup,this));this.bind("mousedown",this._mousedown);this.bind("mouseenter",this._mouseenter);this.bind("mouseleave",this._mouseleave);this.bind("keyup",this._keyup);this.bind("keydown",this._keydown)};this._mouseup=function(){if(this._down){this._down=false;this._updateBg()}};this._mousedown=function(){this._down=true;this._updateBg()};this._mouseenter=function(){this._over=true;this._updateBg()};this._mouseleave=function(){this._over=false;this._updateBg()};this._focus=
function(c){this["focus-background"]().attachTo(this);a._focus.call(this,c)};this._keydown=function(c){if((c.which==32||c.which==13)&&!this._down)this._mousedown()};this._keyup=function(c){if((c.which==32||c.which==13)&&this._down){this._mouseup();this.trigger("click",{domEvent:c,source:this})}c.which==27&&this._down&&this._mouseup()};this._blur=function(c){this["focus-background"]().detach();a._blur.call(this,c)};this._backgroundByName=function(c){var d=this[c+"-background"]();if(this._background!=
d){this._background&&this._background.detach();d.attachTo(this);this._background=d;this._backgroundName=c}};this._bindToDom=function(c){return uki.view.Focusable._bindToDom.call(this,c)||uki.view.Label.prototype._bindToDom.call(this,c)}});(function(){function b(){a||uki.dom.probe(uki.createElement("div","position:absolute;left:-99em;width:100px;height:100px;overflow:scroll;",'<div style="position:absolute;left:0;width:100%;"></div>'),function(d){a=d.offsetWidth-d.clientWidth;c=d.firstChild.offsetWidth==
100});return a}var a,c;uki.view.declare("uki.view.ScrollPane",uki.view.Container,function(d){this.typeName=function(){return"uki.view.ScrollPane"};this._setup=function(){d._setup.call(this);uki.extend(this,{_clientRect:this.rect().clone(),_rectForChild:this.rect().clone(),_scrollableV:true,_scrollableH:false,_scrollV:false,_scrollH:false,_sbV:false,_sbH:false})};uki.addProps(this,["scrollableV","scrollableH","scrollH","scrollV"]);this.rectForChild=function(){return this._rectForChild};this.clientRect=
function(){return this._clientRect};this.scroll=function(f,e){f&&this.scrollTop(this.scrollLeft()+e);e&&this.scrollTop(this.scrollTop()+e)};uki.each(["scrollTop","scrollLeft"],function(f,e){this[e]=function(g){if(g==undefined)return this._dom[e];this._dom[e]=g;this.trigger("scroll",{source:this});return this}},this);this.visibleRect=function(){var f=this._clientRect.clone();f.x=this.rect().x+this.scrollLeft();f.y=this.rect().y+this.scrollTop();return f};this.rect=function(f){if(f===undefined)return this._rect;
f=s.create(f);var e=this._rect;this._parentRect=f;if(!this._resizeSelf(f))return this;this._updateClientRects();this._needsLayout=true;this.trigger("resize",{oldRect:e,newRect:this._rect,source:this});return this};this._createDom=function(){d._createDom.call(this);if(G.indexOf("Gecko/")>-1)this._dom.tabIndex="-1"};this._recalcClientRects=function(){b();var f=this.contentsWidth(),e=this.contentsHeight();f=this._scrollableH?f>this._rect.width:false;e=this._scrollableV?e>this._rect.height:false;this._sbH=
f||this._scrollH;this._sbV=e||this._scrollV;this._clientRect=new s(this._rect.width+(e?-1:0)*a,this._rect.height+(f?-1:0)*a);this._rectForChild=new s(this._rect.width+(e&&!c?-1:0)*a,this._rect.height+(f&&!c?-1:0)*a)};this._updateClientRects=function(){var f=this._clientRect;this._recalcClientRects();if(f.width!=this._clientRect.width||f.height!=this._clientRect.height)this._resizeChildViews(f)};this._resizeChildViews=function(f){for(var e=0,g=this.childViews();e<g.length;e++)g[e].parentResized(f,
this._clientRect)};this._layoutChildViews=function(){for(var f=0,e=this.childViews();f<e.length;f++)e[f]._needsLayout&&e[f].visible()&&e[f].layout()};this._layoutDom=function(f){this._updateClientRects();if(this._layoutScrollH!==this._sbH){this._dom.style.overflowX=this._sbH?"scroll":"hidden";this._layoutScrollH=this._sbH}if(this._layoutScrollV!==this._sbV){this._dom.style.overflowY=this._sbV?"scroll":"hidden";this._layoutScrollV=this._sbV}d._layoutDom.call(this,f)}});uki.view.ScrollPane.initScrollWidth=
b})();uki.view.list={};uki.view.declare("uki.view.List",uki.view.Base,uki.view.Focusable,function(b,a){function c(e,g){for(var k=new Array(g-e),m=0;e<=g;e++,m++)k[m]=e;return k}function d(e,g,k){for(var m=g=uki.binarySearch(g,e);e[g]<=k;)g++;g>m&&e.splice(m,g-m)}this._throttle=42;this._visibleRectExt=300;this._defaultBackground="theme(list)";this._setup=function(){b._setup.call(this);uki.extend(this,{_rowHeight:30,_render:new uki.view.list.Render,_data:[],_lastClickIndex:-1,_selectedIndexes:[]})};
this.defaultBackground=function(){return uki.theme.background("list",this._rowHeight)};uki.addProps(this,["render","packSize","visibleRectExt","throttle","contentDraggable","lastClickIndex","multiselect","lastClickIndex"]);this.rowHeight=uki.newProp("_rowHeight",function(e){this._rowHeight=e;this.minSize(new w(this.minSize().width,this._rowHeight*this._data.length));this._background&&this._background.detach();this._background=null;this.background()&&this.background().attachTo(this);this._relayoutParent()});
this.data=function(e){if(e===undefined)return this._data;this.clearSelection();this._data=e;this._packs[0].itemFrom=this._packs[0].itemTo=this._packs[1].itemFrom=this._packs[1].itemTo=0;this.minSize(new w(this.minSize().width,this._rowHeight*this._data.length));this.trigger("selection",{source:this});this._relayoutParent();return this};this.relayout=function(){this._packs[0].itemFrom=this._packs[0].itemTo=this._packs[1].itemFrom=this._packs[1].itemTo=0;this.layout()};this.contentsSize=function(){return new w(this.rect().width,
this._rowHeight*this._data.length)};this.addRow=function(e,g){this._data.splice(e,0,g);if(g=this._itemAt(e)){var k=r.createElement("div");k.innerHTML=this._rowTemplate.render({height:this._rowHeight,text:this._render.render(this._data[e],this._rowRect(e),e)});g.parentNode.insertBefore(k.firstChild,g);if(e<this._packs[0].itemTo){this._packs[0].itemTo++;this._packs[1].itemFrom++;this._packs[1].itemTo++;this._packs[1].dom.style.top=this._packs[1].itemFrom*this._rowHeight+"px"}else this._packs[1].itemTo++}for(e=
uki.binarySearch(e,this.selectedIndexes());e<this._selectedIndexes.length;e++)this._selectedIndexes[e]++;return this};this.removeRow=function(e){this._data.splice(e,1);this.data(this._data);return this};this.redrawRow=function(e){var g=this._itemAt(e);if(g)g.innerHTML=this._render.render(this._data[e],this._rowRect(e),e);return this};this.selectedIndex=function(e){if(e===undefined)return this._selectedIndexes.length?this._selectedIndexes[0]:-1;this.selectedIndexes([e]);this._scrollToPosition(e);return this};
this.selectedIndexes=function(e){if(e===undefined)return this._selectedIndexes;var g=e!=this._selectedIndexes;this.clearSelection(true);this._selectedIndexes=e;for(e=0;e<this._selectedIndexes.length;e++)this._setSelected(this._selectedIndexes[e],true);g&&this.trigger("selection",{source:this});return this};this.selectedRows=function(){return uki.map(this.selectedIndexes(),function(e){return this._data[e]},this)};this.clearSelection=function(e){for(var g=0;g<this._selectedIndexes.length;g++)this._setSelected(this._selectedIndexes[g],
false);this._selectedIndexes=[];if(!e)this._lastClickIndex=-1};this.isSelected=function(e){return this._selectedIndexes[uki.binarySearch(e,this._selectedIndexes)]==e};this.layout=function(){this._layoutDom(this._rect);this._needsLayout=false;this.trigger("layout",{rect:this._rect,source:this,visibleRect:this._visibleRect});this._firstLayout=false};this._rowRect=function(e){return new s(0,e*this._rowHeight,this.rect().width,this._rowHeight)};this._toggleSelection=function(e){var g=[].concat(this._selectedIndexes),
k=uki.binarySearch(e,g);g[k]==e?g.splice(k,1):g.splice(k,0,e);this.selectedIndexes(g)};var f=false;this._scrollableParentScroll=function(){if(!f)if(this._throttle){if(!this._throttleStarted){this._throttleStarted=true;setTimeout(uki.proxy(function(){this._throttleStarted=false;this.layout()},this),this._throttle)}}else this.layout()};this._relayoutParent=function(){if(this._scrollableParent){for(var e=this;e&&e!=this._scrollableParent;){e._needsLayout=true;e=e.parent()}e.layout()}};this.keyPressEvent=
function(){return x.opera||/mozilla/i.test(G)&&!/(compatible|webkit)/i.test(G)?"keypress":"keydown"};this._bindSelectionEvents=function(){this.bind("mousedown",this._mousedown);this.bind("mouseup",this._mouseup);this.bind(this.keyPressEvent(),this._keypress)};this._mouseup=function(e){if(this._multiselect){var g=uki.dom.offset(this._dom);e=(e.pageY-g.y)/this._rowHeight<<0;this._selectionInProcess&&this._lastClickIndex==e&&this.isSelected(e)&&this.selectedIndexes([e]);this._selectionInProcess=false}};
this._mousedown=function(e){var g=uki.dom.offset(this._dom);g=(e.pageY-g.y)/this._rowHeight<<0;var k=this._selectedIndexes;if(this._multiselect){this._selectionInProcess=false;if(e.shiftKey&&k.length>0)if(this.isSelected(g)){k=[].concat(k);d(k,Math.min(g+1,this._lastClickIndex),Math.max(g-1,this._lastClickIndex));this.selectedIndexes(k)}else this.selectedIndexes(c(Math.min(g,k[0]),Math.max(g,k[k.length-1])));else if(e.metaKey)this._toggleSelection(g);else if(this.isSelected(g))this._selectionInProcess=
true;else this.selectedIndexes([g])}else this.selectedIndexes([g]);this._lastClickIndex=g};this._keypress=function(e){var g=-1;if(e.which==38||e.keyCode==38){g=Math.max(0,this._lastClickIndex-1);e.preventDefault()}else if(e.which==40||e.keyCode==40){g=Math.min(this._data.length-1,this._lastClickIndex+1);e.preventDefault()}else if(this._multiselect&&(e.which==97||e.which==65)&&e.metaKey){e.preventDefault();this.selectedIndexes(c(0,this._data.length-1))}if(g>-1&&g!=this._lastClickIndex){if(e.shiftKey&&
this._multiselect){this.isSelected(g)?this._toggleSelection(this._lastClickIndex):this._toggleSelection(g);this._scrollToPosition(g)}else this.selectedIndex(g);this._lastClickIndex=g}};this._createDom=function(){this._dom=uki.createElement("div",this.defaultCss+"overflow:hidden");var e=uki.createElement("div","position:absolute;left:0;top:0px;width:100%;overflow:hidden");this._packs=[{dom:e,itemTo:0,itemFrom:0},{dom:e.cloneNode(false),itemTo:0,itemFrom:0}];this._dom.appendChild(this._packs[0].dom);
this._dom.appendChild(this._packs[1].dom);this._initFocusable();this._bindSelectionEvents()};this._setSelected=function(e,g){var k=this._itemAt(e);k&&this._render.setSelected(k,this._data[e],g,this.hasFocus())};this._scrollToPosition=function(e){if(this._visibleRect){var g;g=(e+1)*this._rowHeight;e=e*this._rowHeight;f=true;if(g>=this._visibleRect.maxY())this._scrollableParent.scroll(0,g-this._visibleRect.maxY());else e<this._visibleRect.y&&this._scrollableParent.scroll(0,e-this._visibleRect.y);f=
false;this.layout()}};this._itemAt=function(e){if(e<this._packs[1].itemTo&&e>=this._packs[1].itemFrom)return this._packs[1].dom.childNodes[e-this._packs[1].itemFrom];else if(e<this._packs[0].itemTo&&e>=this._packs[0].itemFrom)return this._packs[0].dom.childNodes[e-this._packs[0].itemFrom];return null};this._rowTemplate=new uki.theme.Template('<div style="width:100%;height:${height}px;overflow:hidden;">${text}</div>');this._renderPack=function(e,g,k){var m=[];for(i=g;i<k;i++)m[m.length]=this._rowTemplate.render({height:this._rowHeight,
text:this._render.render(this._data[i],this._rowRect(i),i)});e.dom.innerHTML=m.join("");e.itemFrom=g;e.itemTo=k;e.dom.style.top=g*this._rowHeight+"px";this._restorePackSelection(e,g,k)};this._restorePackSelection=function(e){var g=this._selectedIndexes;if(g[0]<=e.itemFrom&&g[g.length-1]>=e.itemFrom||g[0]<=e.itemTo&&g[g.length-1]>=e.itemTo||g[0]>=e.itemFrom&&g[g.length-1]<=e.itemTo){var k=uki.binarySearch(e.itemFrom,g);for(k=Math.max(k,0);g[k]!==null&&g[k]<e.itemTo;){var m=g[k]-e.itemFrom;this._render.setSelected(e.dom.childNodes[m],
this._data[m],true,this.hasFocus());k++}}};this._swapPacks=function(){var e=this._packs[0];this._packs[0]=this._packs[1];this._packs[1]=e};this._layoutDom=function(e){if(!this._scrollableParent){this._scrollableParent=uki.view.scrollableParent(this);this._scrollableParent.bind("scroll",uki.proxy(this._scrollableParentScroll,this))}var g=this._rowHeight*this._data.length;this._visibleRect=uki.view.visibleRect(this,this._scrollableParent);if(this._focusTarget)this._focusTarget.style.top=this._visibleRect.y+
"px";var k=N((this._visibleRect.height+this._visibleRectExt*2)/this._rowHeight),m=v(0,this._visibleRect.y-this._visibleRectExt),o=E(g,this._visibleRect.maxY()+this._visibleRectExt),n=this._packs[0].itemFrom*this._rowHeight,l=this._packs[1].itemTo*this._rowHeight;g=true;b._layoutDom.call(this,e);if(o<=n||m>=l||o>l&&this._packs[1].itemFrom*this._rowHeight>this._visibleRect.y&&this._packs[1].itemTo>this._packs[1].itemFrom||m<n&&this._packs[0].itemTo*this._rowHeight<this._visibleRect.maxY()){e=m-this._visibleRectExt/
2;e=v(0,Math.round(e/this._rowHeight));k=E(this._data.length,e+k);this._renderPack(this._packs[0],e,k);this._renderPack(this._packs[1],k,k)}else if(o>l&&this._packs[1].itemTo>this._packs[1].itemFrom){e=this._packs[1].itemTo;k=E(this._data.length,this._packs[1].itemTo+k);this._renderPack(this._packs[0],e,k);this._swapPacks()}else if(o>l){e=this._packs[0].itemTo;k=E(this._data.length,this._packs[1].itemTo+k);this._renderPack(this._packs[1],e,k)}else if(m<n){e=v(this._packs[0].itemFrom-k,0);k=this._packs[0].itemFrom;
this._renderPack(this._packs[1],e,k);this._swapPacks()}else g=false;if(g&&/MSIE 6|7/.test(G))this.dom().className+=""};this._bindToDom=function(e){return a._bindToDom.call(this,e)||b._bindToDom.call(this,e)};this._focus=function(e){a._focus.call(this,e);this._selectedIndexes.length==0&&this._data.length>0?this.selectedIndexes([0]):this.selectedIndexes(this.selectedIndexes())};this._blur=function(e){a._blur.call(this,e);this.selectedIndexes(this.selectedIndexes())}});uki.Collection.addAttrs(["data",
"selectedIndex","selectedIndexes","selectedRows"]);uki.view.declare("uki.view.ScrollableList",uki.view.ScrollPane,function(b){this._createDom=function(){b._createDom.call(this);this._list=uki({view:"List",rect:this.rect().clone().normalize(),anchors:"left top right bottom"})[0];this.appendChild(this._list)};uki.each("data rowHeight render packSize visibleRectExt throttle focusable selectedIndexes selectedIndex selectedIndexes selectedRows multiselect contentDraggable draggable textSelectable".split(" "),
function(a,c){uki.delegateProp(this,c,"_list")},this)});uki.view.list.Render=uki.newClass({init:function(){},render:function(b,a){return'<div style="line-height: '+a.height+'px; font-size: 12px; padding: 0 4px;">'+b+"</div>"},setSelected:function(b,a,c,d){b.style.backgroundColor=c&&d?"#3875D7":c?"#CCC":"";b.style.color=c&&d?"#FFF":"#000"}});uki.view.table={};uki.view.declare("uki.view.Table",uki.view.Container,function(b){var a="rowHeight data packSize visibleRectExt render selectedIndex selectedIndexes selectedRows focus blur hasFocus lastClickIndex focusable textSelectable multiselect".split(" ");
this._headerHeight=this._rowHeight=17;this.defaultCss=b.defaultCss+"overflow:hidden;";this._listImpl="uki.view.List";uki.each(a,function(c,d){uki.delegateProp(this,d,"_list")},this);this._setup=function(){this._columns=[];b._setup.call(this)};this._style=function(c,d){this._header.style(c,d);return b._style.call(this,c,d)};this.list=function(){return this._list};this.header=function(){return this._header};this.columns=uki.newProp("_columns",function(c){for(var d=0;d<this._columns.length;d++)this._columns[d].unbind();
this._columns=uki.build(c);for(d=this._totalWidth=0;d<this._columns.length;d++){this._columns[d].position(d);this._columns[d].bind("beforeResize",uki.proxy(function(){this._updateTotalWidth();this._scrollPane.layout()},this))}this._updateTotalWidth();this._header.columns(this._columns)});this.redrawCell=function(c,d){var f=this._list._itemAt(c);if(f){var e=r.createElement("div");e.innerHTML=this.columns()[d].render(this.data()[c],new s(0,c*this.rowHeight(),this.list().width(),this.rowHeight()),c);
f.replaceChild(e.firstChild,f.childNodes[d])}return this};uki.each(["redrawRow","addRow","removeRow"],function(c,d){this[d]=function(){this.list()[d].apply(this.list(),arguments);return this}},this);this.redrawColumn=function(c){for(var d=this._list._packs[1].itemTo,f=this._list._packs[0].itemFrom;f<d;f++)this.redrawCell(f,c);return this};this._updateTotalWidth=function(){for(var c=this._totalWidth=0;c<this._columns.length;c++){this._columns[c].position(c);this._totalWidth+=this._columns[c].width()}this._list.minSize(new w(this._totalWidth,
this._list.minSize().height));this._header.minSize(new w(this._totalWidth,0))};this._createDom=function(){b._createDom.call(this);var c=new s(0,this._headerHeight,this.rect().width,this.rect().height-this._headerHeight),d=c.clone().normalize(),f=new s(0,0,this.rect().width,this._headerHeight),e={view:this._listImpl,rect:d,anchors:"left top bottom right",render:new uki.view.table.Render(this),className:"table-list"};c={view:"ScrollPane",rect:c,anchors:"left top right bottom",scrollableH:true,childViews:[e],
className:"table-scroll-pane"};f={view:"table.Header",rect:f,anchors:"top left right",className:"table-header"};uki.each(a,function(g,k){if(this["_"+k]!==undefined)e[k]=this["_"+k]},this);this._scrollPane=uki.build(c)[0];this._list=this._scrollPane.childViews()[0];this._header=uki.build(f)[0];this._scrollPane.resizeToContents();this.appendChild(this._header);this.appendChild(this._scrollPane);this._scrollPane.bind("scroll",uki.proxy(function(){this._header.dom().style.left=-this._scrollPane.scrollLeft()+
"px"},this))}});uki.Collection.addAttrs(["columns"]);uki.view.table.Render=uki.newClass(uki.view.list.Render,new (function(){this.init=function(b){this._table=b};this.render=function(b,a,c){var d=this._table.columns();return uki.map(d,function(f,e){return d[e].render(b,a,c)}).join("")}}));uki.view.table.Column=uki.newClass(uki.view.Observable,new (function(){this._width=100;this._maxWidth=this._minWidth=this._position=this._offset=0;this._css="float:left;white-space:nowrap;text-overflow:ellipsis;";
this._inset=new z(3,5);this.init=function(){};uki.addProps(this,["position","css","formatter","label","resizable","maxWidth","minWidth","maxWidth","key"]);this.template=function(b){if(b===undefined)return this._template=this._template||uki.theme.template("table-cell");this._template=b;return this};this.headerTemplate=function(b){if(b===undefined)return this._headerTemplate=this._headerTemplate||uki.theme.template("table-header-cell");this._headerTemplate=b;return this};this.width=uki.newProp("_width",
function(b){var a={oldWidth:this._width,source:this};this._width=this._normailizeWidth(b);a.newWidth=this._width;this.trigger("beforeResize",a);if(this._stylesheet&&a.newWidth!=a.oldWidth)(this._stylesheet.styleSheet?this._stylesheet.styleSheet.rules:this._stylesheet.sheet.cssRules)[0].style.width=this._clientWidth()+"px";this.trigger("resize",a)});this._bindToDom=uki.F;this._normailizeWidth=function(b){if(this._maxWidth)b=E(this._maxWidth,b);if(this._minWidth)b=v(this._minWidth,b);return b};this.inset=
uki.newProp("_inset",function(b){this._inset=z.create(b)});this.render=function(b,a){this._prerenderedTemplate||this._prerenderTemplate(a);a=this._key?uki.attr(b,this._key):b[this._position];this._prerenderedTemplate[1]=this._formatter?this._formatter(a,b):a;return this._prerenderedTemplate.join("")};this.appendResizer=function(b,a){a=uki.theme.dom("resizer",a);b.appendChild(a);return a};this.renderHeader=function(b){this._className||this._initStylesheet();return this.headerTemplate().render({data:'<div style="overflow:hidden;text-overflow:ellipsis;*width:100%;height:100%;">'+
this.label()+"</div>",style:"*overflow-y:hidden;"+this._cellStyle(uki.dom.offset.boxModel?b-1:b),className:this._className})};this._prerenderTemplate=function(b){this._className||this._initStylesheet();this._prerenderedTemplate=this.template().render({data:"\u0001\u0001",style:"overflow:hidden;"+this._cellStyle(b.height),className:this._className}).split("\u0001")};this._cellPadding=function(){var b=this._inset;return["padding:",b.top,"px ",b.right,"px ",b.bottom,"px ",b.left,"px;"].join("")};this._cellStyle=
function(b){b="height:"+(b-(uki.dom.offset.boxModel?this._inset.height():0))+"px;";return this._css+this._cellPadding()+";"+b};this._clientWidth=function(){return this._width-(uki.dom.offset.boxModel?this._inset.width()+1:0)};this._initStylesheet=function(){if(!this._className){uki.dom.offset.initializeBoxModel();this._className="uki-table-column-"+uki.guid++;var b="."+this._className+" {width:"+this._clientWidth()+"px;}";this._stylesheet=uki.dom.createStylesheet(b)}}}));uki.view.table.NumberColumn=
uki.newClass(uki.view.table.Column,new function(){this._css=uki.view.table.Column.prototype._css+"text-align:right;"});uki.view.table.CustomColumn=uki.view.table.Column;uki.view.table.Header=uki.newClass(uki.view.Label,function(b){this._setup=function(){b._setup.call(this);this._multiline=true;this._resizers=[]};this.typeName=function(){return"uki.view.table.Header"};this.columns=uki.newProp("_columns",function(a){this._columns=a;this.html(this._createColumns());this._createResizers()});this.redrawColumn=
function(a){this._resizers[a]&&uki.dom.unbind(this._resizers[a]);var c=r.createElement("div");c.innerHTML=this._columns[a].renderHeader(this.rect().height);this._label.replaceChild(c.firstChild,this._label.childNodes[a]);this._columns[a].resizable()&&this._createResizers(a)};this._createColumns=function(){for(var a=[],c=0,d=this._columns,f=d.length;c<f;c++)a[a.length]=d[c].renderHeader(this.rect().height);return a.join("")};this._createResizer=function(a){var c=this._columns[a];if(c.resizable()){c=
c.appendResizer(this._label.childNodes[a],this.rect().height);this._bindResizerDrag(c,a);this._resizers[a]=c}};this._createResizers=function(){uki.each(this._columns,this._createResizer,this)};this._bindResizerDrag=function(a,c){uki.dom.bind(a,"draggesture",uki.proxy(function(d){var f=uki.dom.offset(this.dom());d=d.pageX-f.x;f=0;var e,g=this._columns[c];for(e=0;e<c;e++)f+=this._columns[e].width();g.width(d-f)},this))}});uki.view.declare("uki.view.HSplitPane",uki.view.Container,function(b){this._setup=
function(){b._setup.call(this);this._originalRect=this._rect;uki.extend(this,{_vertical:false,_handlePosition:200,_autogrowLeft:false,_autogrowRight:true,_handleWidth:7,_leftMin:100,_rightMin:100,_panes:[]})};this.handlePosition=uki.newProp("_handlePosition",function(a){this._handlePosition=this._normalizePosition(a);this.trigger("handleMove",{source:this,handlePosition:this._handlePosition,dragValue:a});this._resizeChildViews()});this.handleWidth=uki.newProp("_handleWidth",function(a){if(this._handleWidth!=
a){this._handleWidth=a;a=this._createHandle();this._dom.insertBefore(a,this._handle);this._removeHandle();this._handle=a;this._resizeChildViews()}});this._normalizePosition=function(a){var c=this._vertical?"height":"width";return v(this._leftMin,E(this._rect[c]-this._rightMin-this._handleWidth,v(0,E(this._rect?this._rect[c]:1E3,a*1))))};uki.addProps(this,["leftMin","rightMin","autogrowLeft","autogrowRight"]);this.topMin=this.leftMin;this.bottomMin=this.rightMin;this._removeHandle=function(){this._dom.removeChild(this._handle)};
this._createHandle=function(){var a;if(this._vertical){a=uki.theme.dom("splitPane-vertical",{handleWidth:this._handleWidth});a.style.top=this._handlePosition+"px"}else{a=uki.theme.dom("splitPane-horizontal",{handleWidth:this._handleWidth});a.style.left=this._handlePosition+"px"}uki.each(["draggesturestart","draggesture","draggestureend"],function(c,d){uki.dom.bind(a,d,uki.proxy(this["_"+d],this))},this);return a};this._createDom=function(){this._dom=uki.createElement("div",b.defaultCss);for(var a=
0,c;a<2;a++){c={view:"Container"};c.anchors=a==1?"left top bottom right":this._vertical?"left top right":"left top bottom";c.rect=a==0?this._leftRect():this._rightRect();this._panes[a]=uki.build(c)[0];this.appendChild(this._panes[a])}this._dom.appendChild(this._handle=this._createHandle())};this._normalizeRect=function(a){a=b._normalizeRect.call(this,a);a=a.clone();if(this._vertical)a.height=v(a.height,this._leftMin+this._rightMin);else a.width=v(a.width,this._leftMin+this._rightMin);return a};this._resizeSelf=
function(a){var c=this._rect,d=this._vertical?"height":"width";if(!b._resizeSelf.call(this,a))return false;if(this._autogrowLeft){c=a[d]-c[d];this._handlePosition=this._normalizePosition(this._handlePosition+(this._autogrowRight?c/2:c))}if(this._vertical){if(a.height-this._handlePosition<this._rightMin)this._handlePosition=v(this._leftMin,a.height-this._rightMin)}else if(a.width-this._handlePosition<this._rightMin)this._handlePosition=v(this._leftMin,a.width-this._rightMin);return true};this._draggesturestart=
function(a){var c=uki.dom.offset(this.dom());this._posWithinHandle=a[this._vertical?"pageY":"pageX"]-c[this._vertical?"y":"x"]-this._handlePosition;return true};this._draggesture=function(a){var c=uki.dom.offset(this.dom());this.handlePosition(a[this._vertical?"pageY":"pageX"]-c[this._vertical?"y":"x"]-this._posWithinHandle);this.layout()};this._draggestureend=function(){};this.topPane=this.leftPane=function(a){return this._paneAt(0,a)};this.bottomPane=this.rightPane=function(a){return this._paneAt(1,
a)};this.topChildViews=this.leftChildViews=function(a){return this._childViewsAt(0,a)};this.bottomChildViews=this.rightChildViews=function(a){return this._childViewsAt(1,a)};this._childViewsAt=function(a,c){if(c===undefined)return this._panes[a].childViews();this._panes[a].childViews(c);return this};this._paneAt=function(a,c){if(c===undefined)return this._panes[a];uki.build.copyAttrs(this._panes[a],c);return this};this._leftRect=function(){return this._vertical?new s(this._rect.width,this._handlePosition):
new s(this._handlePosition,this._rect.height)};this._rightRect=function(){return this._vertical?new s(0,this._handlePosition+this._handleWidth,this._rect.width,this._rect.height-this._handleWidth-this._handlePosition):new s(this._handlePosition+this._handleWidth,0,this._rect.width-this._handleWidth-this._handlePosition,this._rect.height)};this._resizeChildViews=function(){this._panes[0].rect(this._leftRect());this._panes[1].rect(this._rightRect())};this._layoutDom=function(a){b._layoutDom.call(this,
a);this._handle.style[this._vertical?"top":"left"]=this._handlePosition+"px"};this._bindToDom=function(a){if(a=="handleMove")return true;return b._bindToDom.call(this,a)}});uki.view.declare("uki.view.VSplitPane",uki.view.HSplitPane,function(b){this._setup=function(){b._setup.call(this);this._vertical=true}});uki.Collection.addAttrs(["handlePosition"]);uki.view.declare("uki.view.VFlow",uki.view.Container,function(b){this.contentsSize=function(){var a=uki.reduce(0,this._childViews,function(c,d){return c+
(d.visible()?d.rect().height:0)});return new w(this.contentsWidth(),a)};this.hidePartlyVisible=uki.newProp("_hidePartlyVisible");this.resizeToContents=function(a){this._resizeChildViews(this._rect);return b.resizeToContents.call(this,a)};uki.each(["appendChild","removeChild","insertBefore"],function(a,c){this[c]=function(d,f){this._contentChanged=true;return b[c].call(this,d,f)}},this);this.layout=function(){this._contentChanged&&this._resizeChildViews(this._rect);return b.layout.call(this)};this._resizeChildViews=
function(a){this._contentChanged=false;for(var c=0,d,f=0,e=this.childViews();f<e.length;f++){d=e[f];d.parentResized(a,this._rect);d.rect().y=c;this._hidePartlyVisible&&d.visible(d._rect.height+c<=this._rect.height);if(d.visible())c+=d._rect.height}}});uki.view.declare("uki.view.HFlow",uki.view.VFlow,function(){this.contentsSize=function(){var b=uki.reduce(0,this._childViews,function(a,c){return a+(c.visible()?c.rect().width:0)});return new w(b,this.contentsHeight())};this._resizeChildViews=function(b){for(var a=
0,c,d=0,f=this.childViews();d<f.length;d++){c=f[d];c.parentResized(b,this._rect);c.rect().x=a;this._hidePartlyVisible&&c.visible(c._rect.width+a<=this._rect.width);if(c.visible())a+=c._rect.width}}});uki_reader.model={};uki_reader.model.Feed=uki.newClass(uki.data.Model,function(b){this.init=function(a){this._posts=[];this._sort="updated";b.init.call(this,a)};uki.data.model.addFields(this,["id","title","categories","sortid","firstitemsec","posts","unread","sort"]);this.loadPosts=uki.data.model.newLoader("posts",
{url:function(){return"http://www.google.com/reader/api/0/stream/contents/"+encodeURIComponent(this.id())},data:function(){return{from:this.posts().length?this.posts()[this.posts().length-1].id():"-1"}},setter:function(a){a=a||[];a=uki.map(a.items,function(c){return new uki_reader.model.Post(c)});if(this._posts.length)this._updateCounts();else this._unread=0;this.addPosts(this.posts().length,a)},ajaxOptions:{dataType:"json"}});this._sortBy=function(a){this._posts=this._posts.sort(function(c,d){return d[a]()*
1-c[a]()*1})};this.addPosts=function(a,c){this.posts(c);this._unreadChangeHandler=this._unreadChangeHandler||uki.proxy(this._unreadChanged,this);for(a=c.length-1;a>=0;a--){c[a].feed(this);c[a].bind("change.unread",this._unreadChangeHandler)}this.sort()&&this._sortBy(this.sort());this.trigger("change.posts");this._updateCounts(c)};this._updateCounts=function(a){this.unread(uki.grep(a||this._posts,function(c){return c.unread()}).length+(a?this.unread():0))};this._unreadChanged=function(){this.unread(this.unread()-
1)}});uki_reader.model.Feed.load=function(b){uki.get("http://www.google.com/reader/atom/user/12840828268072070083/pref/com.google/subscriptions",{async:false},function(a){a=uki.map(a.childNodes[0].childNodes,function(){if(this.nodeName=="entry"){var c={id:this.getElementsByTagName("id")[0].getAttribute("gr:original-id"),title:this.getElementsByTagName("title")[0].textContent,updated:this.getElementsByTagName("updated")[0].textContent};return new uki_reader.model.Feed(c)}});b.feeds(a)})};uki_reader.model.Post=
uki.newClass(uki.data.Model,function(){uki.data.model.addFields(this,["feed","id","title","author","updated","content","summary","unread","origin"]);this.from=function(){if(this.feed)return this.feed.title};this.content=function(){return this._content?this._content.content:this.summary().content};this.markAsRead=function(b){this.unread(false);b.call(this)}});(function(){function b(a){return uki_reader.theme.imagePath+a}uki_reader.theme=uki.extend({},uki.theme.Base,{imagePath:"/src/uki-theme/airport/i/",
backgrounds:{"panel-dark":function(){return new uki.background.Sliced9({h:[b("panel/dark-h.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAECAYAAABodtTSAAAAIklEQVQYGWN89OjRfwYKAeOFCxcoN2T58uWUGxIYGEixIQC2uQv/2FmjnwAAAABJRU5ErkJggg=="],m:[b("panel/dark-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAABCCAYAAACxdz2jAAAAQklEQVRYw+3SQREAIAwDwT7q31olBRHwAGYjoHO5pmcmtZmuA+kkhQQJser85YRYTt5y4jt2YiecEItEHTtBcv2RBQSZeQAFfY4LAAAAAElFTkSuQmCC",false,true]},"2 0 2 0")},"panel-light":function(){return new uki.background.Sliced9({h:[b("panel/light-h.png"),
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAABCAYAAAAFKSQHAAAAD0lEQVQImWO4cuXKf1IxAKwwLUBaex9CAAAAAElFTkSuQmCC"],m:[b("panel/light-m.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAAWCAYAAAAb+hYkAAAAMElEQVQ4y2P8+/fvfwYSARMDGYDl////w00TeQHx79+/wRwQ3759o09AjGoa1YQKAFiCG/x9cnwFAAAAAElFTkSuQmCC",true]},"1 0 0 0")},"table-header":function(){return new uki.background.CssBox("background:url("+uki.theme.imageSrc("table-header")+");border-bottom:1px solid #CCC;")}},images:{},imageSrcs:{x:function(){return[b("x.png"),
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=",b("x.gif")]},"list-selected-row":function(){return[b("list/selected-row.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAARCAYAAAArDQkmAAAAN0lEQVRYw+3RAQ0AMAjAsHNVN3atyAEbhHQS1ng/62hM1wIgAgJEQIAICBABASIgAgJEQIBIy2u67AKjWqm8DQAAAABJRU5ErkJggg==",b("list/selected-row.gif")]},"list-unread":function(){return[b("list/unread.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABJUlEQVQ4y2NgGAVYQc2qG4rtu17Wtux6ebxt1+sfILpj54uahuX3FQhqzmy/pFSz7OHKju2v//fuevN/4t43YBrEr179dFlB+3W8hjDmTrjSWL/6+f+Ora/+d2xBwkA+SDx/2p0afAYwp3VeP1255Mn/mhXPMDBIPKPz9nF8BrBEVVz6WTjz4f+SuQ//F89BYBAfJB5TfvkHXgO8k46dSWm//T9rwr3/mUgYxAeJ+6acxOsCZsegrW3+GWf/R1Rc+x9bf+N/QvMtMA3ig8SdIw7V4g1Ec+cZWk6hO9Z7xJ7875V49r938gUwDeK7RBxY6Ra6U5FQTDKZO0/SsvfZ3OYYvPeMS+jBn87Bu0/b++9qdAneokRsWmIEeQcUJlDMDBUbhAAARh3Ic97iQwkAAAAASUVORK5CYII=",
b("list/unread.png")]},"list-unread-selected":function(){return[b("list/unread-selected.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAASElEQVQ4y2NgGAVYwf///xWAuBqIjwHxDygN4isQq3npf+xgKUFDoDbhA9WEDDhGwIBjhAz4QcCAHzR3AcVhQFksUJwOhh4AAMVYJHi3XECRAAAAAElFTkSuQmCC",b("list/unread-selected.png")]},"table-header":function(){return[b("table/header.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAR0lEQVQoz8XNORIAIAgEQbn+/18Bj8TMMlgCJ6Wa1blrYFqwTT38fjk/6YEzEl/O/IVHBXd3HBMRjnc4FpFPyyVsZjhmZhgvHLIaOS+PnNYAAAAASUVORK5CYII="]},
"splitPane-x":function(){return[b("splitPane/x.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAMklEQVQIHR3GoQ0AAAgDsP1/AxaNhSMIgoNGhmhSzAzN7Olwd1bV0xER7O6nY3eZmU8/oKwy0Tv1fE4AAAAASUVORK5CYII="]},"splitPane-v-bg":function(){return[b("splitPane/v-bg.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAMklEQVQY083KMQEAMAgDMA48ohArNQUts9BzuZPdfWHIqgorSvIiSS/urhdn5vsIwIoPCOcbF8QKbsQAAAAASUVORK5CYII="]},"tree-list-header":function(){return[b("header/tree-list.png"),
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAANElEQVQ4y2NgGNagHQ1TZADFLvAl1wAGqGayDWEgxxBcCn2JDQ+aOLmdEkOoFpX0T4n0AQDoThJhbb2E6gAAAABJRU5ErkJggg==",b("header/tree-list.gif")]},"unread-header":function(){return[b("header/unread.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVQ4jWNgGAU0A4JAHAzE3VAcDBUjGoA0LEPDwaQY0I3FgG66GkCxFygOxFFAAgAAoF8RlRhg/AAAAAAASUVORK5CYII=",b("header/unread.gif")]},arrows:function(){return[b("arrows.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAABAElEQVQ4y62UvQ2DMBCFvQFsQDYzm5gN0kQCV6YBpDQ0MS2jMAIjOGfACrbOPhd50quwPt3POxi71E3L2qr5wQgZY1Yw+Y7JaTGHx6V/qrlMAJ16cEkDD6je20E3GNj42sENCvaAl2EMG4DrBNBpA9ck8GctCKCTICuU44dnVsiTM7RVSfkuMmYowEV0ht2kFQZCgAoF3XP4GnSVmUPy3f9kK0tt2H6/VZbS8Y7ZNlNANwbbJgGsblXCItDqtArmpyIw5W8YtnpGJYhOsG271SsqYXSw2EDuItcRQEX0OpAFbe5CiOhs7kLSvzA4s7Nd/9wQIL+APOO/qEVO3GKtfgEB6EwzIYKPOgAAAABJRU5ErkJggg==",
b("arrows.gif")]},"tree-selected-bg":function(){return[b("tree/selected-bg.png"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABJElEQVQ4y61UQZLDIAyTZrhu/3/sD/YjfdIi9QAhxoGmh80hEEMsydaYz9+X8Y9PeTx+wPFJAO4rYBgEYXhxuogQKJJhr0mShC2QHcDusb2oIilgOqAC7T8j/h+TZQUAUP6qdgJS+oVkErDa2hlMksnGKpyP2NdNqdLJyGkFQH9guKvhkSAzvGhOz6UkTE2xWjYrICgirJOOvYxSq3N4sffGlxyx0OWafOcPviOAU9GRmgGwtMucPHYm8PDiSoE6oIJLSq06r6QqX2x050sQRRN4Pz6Y9lcEdMjojujRNPUa7hglY39j/GJ5rk5mFMqWjZ/3ocvcTJs7Rteqllo1zbN5OuQM1/nX7pwAxQYMrXzcjGsN4xrqZl7fB5gl3xsj+nA10d9McATavUOaqgAAAABJRU5ErkJggg==",
b("tree/selected-bg.gif")]}},templates:{"table-header-cell":function(){return new uki.theme.Template('<div style="position:relative;border:1px solid #CCC;border-top:none;border-left:none;font-size:11px;line-height:13px;font-family: '+uki.theme.style("fontFamily")+';${style}" class="${className}">${data}</div>')},"table-cell":function(){return new uki.theme.Template('<div style="position:relative;margin-right:1px;height:100%;font-family: '+uki.theme.style("fontFamily")+';${style}" class="${className}">${data}</div>')}},
styles:{fontFamily:function(){return"Lucida Grande,Arial,Helvetica,sans-serif"}},doms:{resizer:function(a){var c=new uki.theme.Template("position:absolute;width:7px;top:0;right:-4px;height:${height}px;cursor:col-resize;cursor:ew-resize;z-index:101;background:url("+uki.theme.imageSrc("x")+")");a=uki.createElement("div",c.render({height:a}));if(!a.style.cursor||window.opera)a.style.cursor="e-resize";return a},"splitPane-vertical":function(a){a=a.handleWidth==1?uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;width:100%;height:5px;margin-top:-2px;cursor:row-resize;cursor:ns-resize;z-index:200;overflow:hidden;background: url("+
uki.theme.imageSrc("x")+")",'<div style="position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;background:#999;width:100%;height:1px;left:0px;top:2px;overflow:hidden;"></div>'):uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;width:100%;height:"+a.handleWidth+"px;cursor:row-resize;cursor:ns-resize;z-index:200;overflow:hidden;background: url("+uki.theme.imageSrc("splitPane-v-bg")+") 50% 50% repeat-x;",
'<div style="position:absolute;left:50%;top:50%;margin:-2px 0 0 -2px;width:4px;height:4px;background: url('+uki.theme.imageSrc("splitPane-x")+') 50% 50% no-repeat"></div>');if(!a.style.cursor||window.opera)a.style.cursor="n-resize";return a},"splitPane-horizontal":function(a){a=a.handleWidth==1?uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;height:100%;width:5px;margin-left:-2px;cursor:col-resize;cursor:ew-resize;z-index:200;overflow:hidden;background: url("+
uki.theme.imageSrc("x")+")",'<div style="position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;background:#999;height:100%;width:1px;top:0px;left:2px;overflow:hidden;"></div>'):uki.createElement("div","position:absolute;z-index:100;-moz-user-focus:none;font-family:Arial,Helvetica,sans-serif;height:100%;width:"+(a.handleWidth-2)+"px;border: 1px solid #CCC;cursor:col-resize;cursor:ew-resize;z-index:200;overflow:hidden;background: url("+uki.theme.imageSrc("splitPane-horizontal")+
") 50% 50% no-repeat;");if(!a.style.cursor||window.opera)a.style.cursor="e-resize";return a}}});uki.theme.register(uki_reader.theme)})();uki_reader.layout={};uki_reader.layout.toolbar=function(){return{view:"Box",rect:"1000 68",anchors:"left top right",id:"top",background:"theme(panel-dark)",childViews:{view:"Label",rect:"0 0 1000 20",anchors:"left top right",id:"title",style:{textAlign:"center",textShadow:"0 1px 0px rgba(255,255,255,0.8)",color:"#000"},text:"Google Reader"}}};uki_reader.layout.leftPane=
function(){return{textSelectable:false,childViews:[{view:"ScrollPane",rect:"250 910",anchors:"left top right bottom",background:"#DDE4EB",childViews:{view:"uki_reader.view.Feeds",rect:"0 10 250 200",anchors:"left top right",style:{fontSize:"12px"},childViews:[{view:"Label",rect:"250 20",anchors:"left top right",text:"SUBSCRIPTIONS",inset:"5 0 2 9",background:"theme(tree-list-header)"},{view:"uki.more.view.TreeList",id:"feeds",rect:"0 28 250 10",anchors:"left top right",style:{fontSize:"11px",fontFamily:uki.theme.style("fontFamily"),
lineHeight:"11px"},render:new uki_reader.view.feeds.renderer,rowHeight:20,focusable:false,textSelectable:false}]}},{view:"Box",rect:"0 910 250 22",anchors:"left bottom right",background:"theme(panel-light)"}]}};uki_reader.layout.postsPane=function(){return{view:"uki_reader.view.Posts",rect:"749 200",anchors:"left top right bottom",style:{fontSize:"12px",lineHeight:"12px"},multiselect:true}};uki_reader.layout.postPane=function(){return{view:"ScrollPane",rect:"749 722",anchors:"left top right bottom",
scrollV:true,childViews:[{view:"VFlow",id:"meta",rect:"10 0 729 78",anchors:"left top right",background:"cssBox(border-bottom: 1px solid #CCC)",childViews:[{view:"Box",rect:"200 22",anchors:"left top",childViews:[{view:"Label",rect:"0 6 50 16",anchors:"left top",background:"theme(field)",text:"Title:"},{view:"Label",rect:"60 6 140 16",anchors:"left top rigth",text:"-",background:"theme(value)",field:"title",textSelectable:true}]},{view:"Box",rect:"200 16",anchors:"left top",childViews:[{view:"Label",
rect:"0 0 50 16",anchors:"left top",background:"theme(field)",text:"From:"},{view:"Label",rect:"60 0 140 16",anchors:"left top rigth",text:"-",background:"theme(value)",field:"from",textSelectable:true,style:{fontWeight:"bold"}}]},{view:"Box",rect:"200 16",anchors:"left top",childViews:[{view:"Label",rect:"0 0 50 16",anchors:"left top",background:"theme(field)",text:"Author:"},{view:"Label",rect:"60 0 140 16",anchors:"left top rigth",text:"-",background:"theme(value)",field:"author",textSelectable:true}]},
{view:"Box",rect:"200 16",anchors:"left top",childViews:[{view:"Label",rect:"0 0 50 16",anchors:"left top",background:"theme(field)",text:"Updated:"},{view:"Label",rect:"60 0 140 16",anchors:"left top rigth",text:"-",background:"theme(value)",field:"updated",textSelectable:true}]}]},{view:"Label",rect:"0 80 749 100",anchors:"left top right",text:"",multiline:true,inset:"5 10",id:"content",textSelectable:true}]}};uki_reader.layout.main=function(){return uki({view:"Box",rect:"1000 1000",anchors:"left top right bottom",
childViews:[uki_reader.layout.toolbar(),{view:"HSplitPane",rect:"0 68 1000 932",anchors:"left top right bottom",handlePosition:250,minLeft:150,handleWidth:1,leftPane:uki_reader.layout.leftPane(),rightChildViews:{view:"VSplitPane",rect:"749 932",anchors:"left top right bottom",handleWidth:10,handlePosition:200,minTop:100,topChildViews:uki_reader.layout.postsPane(),bottomChildViews:uki_reader.layout.postPane()}}]})};uki_reader.view={};uki_reader.view.Posts={};uki.view.declare("uki_reader.view.Posts",
uki.view.Table,function(b){function a(d){return d*1?'<div class="unread"></div>':""}this._setup=function(){b._setup.call(this);this._initialWidths=[];this._rowHeight=17};this.feed=uki.newProp("_feed",function(d){this._feed&&this._feed.unbind("change.posts",this._postsChange);this._feed=d;this.data(d.posts());d.bind("change.posts",uki.proxy(this._postsChange,this));this.trigger("change.posts")});this._postsChange=function(){this.data(this.feed().posts());this.trigger("change.posts")};this._createDom=
function(){b._createDom.call(this);this._scrollPane.scrollableH(false);this._scrollPane.scrollV(true);this._header.background("theme(table-header)");this._list.background("white");this._list.render(new uki_reader.view.Posts.Renderer(this));this.columns([{view:"uki_reader.view.Posts.Column",label:'<img src="'+uki.theme.imageSrc("unread-header")+'" style="margin:0 0 0 1px;" />',inset:"0 0",width:19,minWidth:19,formatter:a,key:"unread"},{view:"uki_reader.view.Posts.Column",label:"From",width:100,minWidth:150,
resizable:true,key:"author"},{view:"uki_reader.view.Posts.Column",label:"Title",width:500,minWidth:150,resizable:true,key:"title"},{view:"uki_reader.view.Posts.DateColumn",label:"Date Updated",width:100,minWidth:70,resizable:true,name:"date",table:this,key:"updated"}]);var d=this._list.render().classPrefix,f=(new uki.theme.Template(".${classPrefix}-selected { background: url("+uki.theme.imageSrc("list-selected-row")+"); color: #FFF } .${classPrefix}-selected-blured { background: url("+uki.theme.imageSrc("list-selected-blured-row")+
"); } .${classPrefix}-list .unread { background: url("+uki.theme.imageSrc("list-unread")+"); width: 16px; height: 16px; margin: -1px 0 0 1px; } .${classPrefix}-selected .unread { background: url("+uki.theme.imageSrc("list-unread-selected")+"); } ")).render({classPrefix:d});this._list.className(d+"-list");uki.dom.createStylesheet(f)};this.columns=uki.newProp("_columns",function(d){for(var f=0;f<this._columns.length;f++)this._columns[f].unbind();this._columns=uki.build(d);this._initialTotalWidth=0;
this._initialWidths=[];for(f=this._resizableCols=0;f<this._columns.length;f++){d=this._columns[f];this._initialWidths[f]=d.width();d.resizable()&&this._resizableCols++;d.position(f);this._initialTotalWidth+=d.width();this._columns[f].bind("beforeResize",uki.proxy(this._beforeColumnResize,this,f))}this._header.columns(this._columns);this._fitWidth()});this.relayout=function(){this._list.relayout()};var c=false;this._beforeColumnResize=function(d,f){if(!c){c=true;f=f.newWidth-f.oldWidth;var e,g,k,m;
if(f>0){k=this._columns.length;m=-1}else{k=d;m=1}do{e=this._columns[k+=m];if(k==d||!e)break;if(e.resizable()){e.maxWidth(0);g=e.width();e.width(g-f);e=g-e.width();f-=e}}while(f);this._fixMaxWidths();this._recalcInitialWidths();c=false}};this._recalcInitialWidths=function(){for(var d=this._initialTotalWidth=0;d<this._columns.length;d++){this._initialWidths[d]=this._columns[d].width();this._initialTotalWidth+=this._initialWidths[d]}};this._layoutDom=function(d){b._layoutDom.call(this,d);this._fitWidth()};
this._fixMaxWidths=function(){for(var d=0,f=[0],e=this.rect().width-uki.view.ScrollPane.initScrollWidth(),g=1;g<this._columns.length;g++)f[g]=f[g-1]+this._columns[g-1].width();for(g=this._columns.length-1;g>=0;g--){var k=this._columns[g];k.resizable()&&k.maxWidth(e-f[g]-d);d+=k.minWidth()||k.width()}};this._fitWidth=function(){c=true;var d=uki.view.ScrollPane.initScrollWidth();d=this.rect().width-d-this._initialTotalWidth;for(var f,e,g=this._resizableCols,k=[].concat(this._initialWidths);d&&g;)for(var m=
g,o=0;m>0&&o<this._columns.length;o++){e=this._columns[o];e.maxWidth(0);if(e.resizable()){f=d/m<<0;e.width(k[o]+f);e=e.width()-k[o];e!=f&&g--;k[o]+=e;d-=e;m--}}this._updateTotalWidth();this._fixMaxWidths();c=false}});uki.view.declare("uki_reader.view.Posts.Column",uki.view.table.Column,function(){this._inset=new uki.geometry.Inset(1,3)});uki.view.declare("uki_reader.view.Posts.DateColumn",uki_reader.view.Posts.Column,function(b){function a(h){return h.getHours()%12+":"+e(h.getMinutes())+" "+(h.getHours()>
12?"PM":"AM")}function c(h){return p[h.getMonth()]+" "+h.getDate()+", "+h.getFullYear()}function d(h){return j[h.getMonth()]+" "+h.getDate()+", "+h.getFullYear()}function f(h){if(h>1900)h-=1900;if(h>100)h-=100;return e(h)}function e(h){return h<10?"0"+h:h}function g(h){return e(h.getMonth()+1)+"/"+e(h.getDate())+"/"+f(h.getYear())}function k(h){var q=new Date;q.setTime(h*1E3);return'<div style="float:right;">'+a(q)+"</div>"+c(q)}function m(h){var q=new Date;q.setTime(h*1E3);return'<div style="float:right;">'+
a(q)+"</div>"+d(q)}function o(h){var q=new Date;q.setTime(h*1E3);return'<div style="float:right;">'+a(q)+"</div>"+g(q)}function n(h){var q=new Date;q.setTime(h*1E3);return d(q)}function l(h){var q=new Date;q.setTime(h*1E3);return g(q)}this.table=uki.newProp("_table");this.width=function(h){if(h===undefined)return b.width.call(this);b.width.call(this,h);this._updateColumnFormatting();return this};this._updateColumnFormatting=function(){var h;h=this.width();h=h>190?k:h>150?m:h>130?o:h>100?n:l;if(this.formatter()!=
h){this.formatter(h);this.table()&&this.table().redrawColumn(uki.inArray(this,this.table().columns()))}};var p=["January","February","March","April","May","June","July","August","September","October","November","December"],j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});uki_reader.view.Posts.Renderer=uki.newClass(uki.view.table.Render,function(b){this.init=function(a){this.classPrefix="posts-"+uki.guid++;b.init.call(this,a)};this.setSelected=function(a,c,d,f){a.className=
!d?"":f?this.classPrefix+"-selected":this.classPrefix+"-selected-blured"}});uki.more={};uki.more.view={};uki.more.view.treeList={};uki.view.declare("uki.more.view.TreeList",uki.view.List,function(b){function a(d,f,e){for(f=f;f<d.length;f++)d[f]+=e}function c(d){d=uki.attr(d,"children");for(var f=d.length,e=0;e<d.length;e++)if(d[e].__opened)f+=c(d[e]);return f}this._setup=function(){b._setup.call(this);this._render=new uki.more.view.treeList.Render};this.listData=b.data;this.data=uki.newProp("_treeData",
function(d){this._treeData=d;this._data=this._treeNodeToListData(d);d=false;for(var f=this.listData().length-1;f>=0;f--)if(this._data[f].__opened){d=true;this._openSubElement(f)}this.listData(this._data);d&&this.trigger("open")});this._treeNodeToListData=function(d,f){f=f||0;return uki.map(d,function(e){e.__indent=f;return e})};this.toggle=function(d){this._data[d].__opened?this.close(d):this.open(d)};this._openSubElement=function(d){var f=this._data[d],e=uki.attr(f,"children");if(!e||!e.length)return 0;
var g=e.length;f.__opened=true;this._data.splice.apply(this._data,[d+1,0].concat(this._treeNodeToListData(e,f.__indent+1)));for(f=e.length-1;f>=0;f--)if(this._data[d+1+f].__opened)g+=this._openSubElement(d+1+f);return g};this.open=function(d){if(this._data[d].__opened)return this;var f=this._openSubElement(d),e=uki.binarySearch(d,this._selectedIndexes),g=this._lastClickIndex,k=this._selectedIndexes;this.clearSelection(true);a(k,e+(k[e]==d?1:0),f);this.listData(this._data);this.selectedIndexes(k);
this._lastClickIndex=g>d?g+f:g;this.trigger("open");return this};this.close=function(d){var f=this._data[d],e=this._selectedIndexes,g=uki.attr(f,"children");if(!(!g||!g.length||!f.__opened)){g=c(f);f.__opened=false;this._data.splice(d+1,g);f=uki.binarySearch(d,e);for(var k=f+(e[f]==d?1:0),m=0,o=this._lastClickIndex;e[k+m]&&e[k+m]<=d+g;)m++;this.clearSelection(true);a(e,k,-g);m>0&&e.splice(f,m);this.listData(this._data);this.selectedIndexes(e);this._lastClickIndex=o>d?o-g:o;this.trigger("close")}};
this._mousedown=function(d){if(d.target.className.indexOf("toggle-tree")>-1){var f=uki.dom.offset(this._dom);this.toggle((d.pageY-f.y)/this._rowHeight<<0)}else b._mousedown.call(this,d)};this._keypress=function(d){b._keypress.call(this,d);d=d.domEvent;if(d.which==39||d.keyCode==39)this.open(this._lastClickIndex);else if(d.which==37||d.keyCode==37)this.close(this._lastClickIndex)}});uki.more.view.treeList.Render=uki.newClass(uki.view.list.Render,new (function(){this._parentTemplate=new uki.theme.Template('<div class="${classPrefix}-row ${classPrefix}-${opened}" style="margin-left:${indent}px"><div class="${classPrefix}-toggle"><i class="toggle-tree"></i></div>${text}</div>');
this._leafTemplate=new uki.theme.Template('<div class="${classPrefix}-row" style="margin-left:${indent}px">${text}</div>');this.initStyles=function(){this.classPrefix="treeList-"+uki.guid++;var b=(new uki.theme.Template(".${classPrefix}-row { color: #333; position:relative; padding-top:3px; } .${classPrefix}-toggle { overflow: hidden; position:absolute; left:-15px; top:5px; width: 10px; height:9px; } .${classPrefix}-toggle i { display: block; position:absolute; left: 0; top: 0; width:20px; height:18px; background: url(${imageSrc});} .${classPrefix}-selected { background: #3875D7; } .${classPrefix}-selected .${classPrefix}-row { color: #FFF; } .${classPrefix}-selected i { left: -10px; } .${classPrefix}-selected-blured { background: #CCCCCC; } .${classPrefix}-opened i { top: -9px; }")).render({classPrefix:this.classPrefix,
imageSrc:"i/arrows.png"});uki.dom.createStylesheet(b)};this.render=function(b){this.classPrefix||this.initStyles();var a=b.data,c=uki.attr(b,"children");return c&&c.length?this._parentTemplate.render({text:a,indent:b.__indent*18+22,classPrefix:this.classPrefix,opened:b.__opened?"opened":""}):this._leafTemplate.render({text:a,indent:b.__indent*18+22,classPrefix:this.classPrefix})};this.setSelected=function(b,a,c,d){b.className=!c?"":d?this.classPrefix+"-selected":this.classPrefix+"-selected-blured"}}));
uki_reader.view.feeds={};uki.view.declare("uki_reader.view.Feeds",uki.view.VFlow,function(b){this._setup=function(){b._setup.call(this)};this.feeds=function(a){uki("TreeList",this).data(a);this._bindUnread(a);this.resizeToContents("height").layout();return this};this._bindUnread=function(a){uki.each(a,function(c,d){d.bind("change.unread",uki.proxy(this._unreadChanged,this,d))},this)};this._unreadChanged=function(a){(a=this._findFeed(a))&&a.list.redrawRow(a.position)};this.appendChild=function(a){this._bindListEvents(a);
return b.appendChild.apply(this,arguments)};this.selectedRow=uki.newProp("_selectedRow",function(a){(a=this._findMailbox(a))&&a.list.selectedIndex(a.position)});this._findFeed=function(a){var c=-1,d=false;uki("[data]",this).each(function(f,e){if((c=uki.inArray(a,e.listData()))>-1){d={list:e,position:c};return false}});return d};this._bindListEvents=function(a){a.selectedIndexes&&a.bind("selection",uki.proxy(this._selectionUpdate,this,a))};this._selectionUpdate=function(a){if(a.selectedIndexes().length){uki("[selectedIndexes]",
this).each(function(c,d){d!=a&&d.clearSelection()});this._selectedRow=a.selectedRows()[0];this.trigger("selection")}}});uki_reader.view.feeds.renderer=uki.newClass(uki.more.view.treeList.Render,function(){this._parentTemplate=new uki.theme.Template('<div class="${classPrefix}-row ${classPrefix}-${opened}" style="margin-left:${indent}px;background:url(${icon}) no-repeat 0 50%;"><div class="${classPrefix}-toggle"><i class="toggle-tree"></i></div>${text}</div>');this._leafTemplate=new uki.theme.Template('<div class="${classPrefix}-row" style="margin-left:${indent}px; padding-right: ${unreadPadding}px"><span style="float: left; background:url(${icon}) no-repeat -35px -3px; width: 13px; height: 13px; margin-right: 4px;"></span>${text}<div class="${classPrefix}-unread" style="display:${unreadDisplay}">${unread}</div></td></div>');
this.initStyles=function(){this.classPrefix="treeList-"+uki.guid++;var b=(new uki.theme.Template(".${classPrefix}-unread { position: absolute; padding: 2px 4px; min-width: 14px; text-align: center; right: 8px; top: 3px; color: #FFF; background: #94A7C8; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; line-height: 10px; font-size: 10px; font-weight: bold;  } .${classPrefix}-row { color: #000; position:relative; padding: 4px 3px 3px 10px; white-space: nowrap; text-overflow: ellipsis; *zoom: 1; } .${classPrefix}-toggle { overflow: hidden; position:absolute; left:-14px; top:5px; width: 10px; height:9px; } .${classPrefix}-toggle i { display: block; position:absolute; left: 0; top: 0; width:20px; height:18px; background: url(${imageSrc});} .${classPrefix}-selected-blured .${classPrefix}-row { color: #FFF; } .${classPrefix}-selected-blured i { left: -10px; } .${classPrefix}-selected-blured { background: url(${bgSrc}); } .${classPrefix}-selected-blured .${classPrefix}-unread { background: #FFF; color: #94A7C8 } .${classPrefix}-opened i { top: -9px; }")).render({classPrefix:this.classPrefix,
imageSrc:uki.theme.imageSrc("arrows"),bgSrc:uki.theme.imageSrc("tree-selected-bg")});uki.dom.createStylesheet(b)};this.render=function(b){this.classPrefix||this.initStyles();b.title();var a=uki.attr(b,"children"),c={text:b.title(),unread:b.unread(),unreadDisplay:b.unread()?"block":"none",unreadPadding:b.unread()>100?"40":b.unread()>0?"30":0,icon:"http://www.google.com/reader/ui/1007736847-lhn-sprite.png",classPrefix:this.classPrefix};if(a&&a.length){c.opened=b.__opened?"opened":"";return this._parentTemplate.render(c)}else return this._leafTemplate.render(c)}});
uki.view.declare("uki_reader.view.Toolbar",uki.view.HFlow,function(b){function a(c,d){c=c.clone();c.width=d;return c}this.initWidths=function(){for(var c=0,d=0,f=this.childViews();d<f.length;d++){c+=f[d].minSize().width||f[d].rect().width;if(uki.attr(f[d],"spacer"))this._spacer=f[d]}this._minSize=new uki.geometry.Size(c,this.minSize.height)};this.algorithm=function(c){this._resizeChildViews=this["_algorithm"+c]};this._resizeChildViews=this._algorithmResizeSpacer=function(c){this._contentChanged&&
this.initWidths();var d=this.rect().width-this.minSize().width;this._spacer.rect(a(this._spacer.rect(),this._spacer.minSize().width+d));b._resizeChildViews.call(this,c)};this._algorithmResizeLast=function(c){var d=this.childViews()[this.childViews().length-1];if(this._contentChanged){d.resizeToContents("width");this.initWidths()}var f=uki.attr(this._spacer,"prefferedWidth")*1,e=this._spacer.minSize().width;e=f-e;e=this.rect().width-this.minSize().width-e;if(e<0){this._spacer.rect(a(this._spacer.rect(),
f+e));d.rect(a(d.rect(),d.minSize().width))}else{this._spacer.rect(a(this._spacer.rect(),f));d.rect(a(d.rect(),d.minSize().width+e))}b._resizeChildViews.call(this,c)}});uki.view.declare("uki_reader.view.ToolbarButton",uki.view.Container,function(b){uki.each(["html","backgroundPrefix","inset"],function(a,c){uki.delegateProp(this,c,"_button")},this);this.label=function(a){if(a===undefined)return this._label.html();this._label.html(a).resizeToContents("width").layout();return this};this.icon=uki.newProp("_icon",
function(a){this._icon=a;var c=uki.createElement("img","position:absolute;top:1px");c.ondragstart=function(){return false};c.src=a;uki.image.load([c],uki.proxy(function(){c.style.left=(this.rect().width-c.width)/2+"px";this._button._label.appendChild(c)},this))});this.disabled=function(a){if(a===undefined)return this._button.disabled();this._button.disabled(a);this._label.style("color",a?"#666":"#000");this._button._label.style.opacity=a?"0.5":"";return this};this._createDom=function(){b._createDom.call(this);
var a=this.rect();this._button=uki({view:"Button",rect:a.clone().normalize(),anchors:"left top right bottom",inset:"0",focusable:false})[0];this._label=uki({view:"Label",rect:new uki.geometry.Rect(a.width/2,a.height+2,0,11),anchors:"bottom",style:{fontSize:"11px",textShadow:"0 1px 0px rgba(255,255,255,0.5)",fontFamily:"Lucida Grande,Arial,Helvetica,sans-serif"}})[0];this.appendChild(this._button);this.appendChild(this._label);this._label.bind("mousedown",uki.proxy(this._passEvent,this));this._label.bind("mouseleave",
uki.proxy(this._passEvent,this));this._label.bind("click",uki.proxy(this._passEvent,this));this._button._updateBg=uki.proxy(this._updateBg,this)};this._passEvent=function(a){this._button.trigger(a.type,a)};this._updateBg=function(){uki.view.Button.prototype._updateBg.call(this._button);this.style("zIndex",this._button._down||this._button._over?200:100)}});uki_reader.controller={};uki_reader.controller.main=function(){var b=uki_reader.layout.main().attachTo(window,"1000 1000"),a=uki("Feeds",b),c=uki("Posts",
b);uki_reader.model.Feed.load(a[0]);a.bind("selection",function(){var g=this.selectedRow();if(g){uki("ScrollPane",c).attr("scrollTop",0);c[0].feed(g).selectedIndexes(g.posts().length?[0]:[]).lastClickIndex(0).focus();g["loaded.posts"]||g.loadPosts(function(){if(g==a[0].selectedRow())c[0].feed(this).selectedIndexes(this.posts().length?[0]:[]).lastClickIndex(0).focus()})}});var d=uki("#meta",b),f=uki("#content",b),e={};uki("#meta [field]",b).each(function(){e[this.field]=this});uki("List",c).bind("selection",
function(){var g=this.selectedIndexes();d.visible(false);f.visible(false);if(g.length==1){var k=this.selectedRows()[0];if(k){e.title.html(k.title()||"");e.from.text(k.from()||"");e.author.text(k.author()||"");e.updated.text(new Date(k.updated()*1E3)||"");d.visible(true).layout();f.html(k.content()||"");f.visible(true).resizeToContents("height").layout();k.unread()&&k.markAsRead(function(){c[0].redrawCell(g[0],0)})}}})};uki_reader.theme.imagePath="i/theme/";window.TESTING||uki_reader.controller.main()})();
